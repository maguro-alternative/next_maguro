/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(e,d){function f(){this.constructor=e}return f.prototype=d.prototype,e.prototype=new f},this.createjs=this.createjs||{},createjs.promote=function(g,f){var j=g.prototype,i=Object.getPrototypeOf&&Object.getPrototypeOf(j)||j.__proto__;if(i){j[(f+="_")+"constructor"]=i.constructor;for(var h in i){j.hasOwnProperty(h)&&"function"==typeof i[h]&&(j[f+h]=i[h])}}return g},this.createjs=this.createjs||{},createjs.indexOf=function(f,e){for(var h=0,g=f.length;g>h;h++){if(e===f[h]){return h}}return -1},this.createjs=this.createjs||{},function(){function b(){throw"UID cannot be instantiated"}b._nextID=0,b.get=function(){return b._nextID++},createjs.UID=b}(),this.createjs=this.createjs||{},createjs.deprecate=function(d,c){return function(){var a="Deprecated property or method '"+c+"'. See docs for info.";return console&&(console.warn?console.warn(a):console.log(a)),d&&d.apply(this,arguments)}},this.createjs=this.createjs||{},function(){function d(f,e,g){this.type=f,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!g,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var c=d.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},c.stopPropagation=function(){this.propagationStopped=!0},c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},c.remove=function(){this.removed=!0},c.clone=function(){return new d(this.type,this.bubbles,this.cancelable)},c.set=function(f){for(var e in f){this[e]=f[e]}return this},c.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=d}(),this.createjs=this.createjs||{},function(){function d(){this._listeners=null,this._captureListeners=null}var c=d.prototype;d.initialize=function(b){b.addEventListener=c.addEventListener,b.on=c.on,b.removeEventListener=b.off=c.removeEventListener,b.removeAllEventListeners=c.removeAllEventListeners,b.hasEventListener=c.hasEventListener,b.dispatchEvent=c.dispatchEvent,b._dispatchEvent=c._dispatchEvent,b.willTrigger=c.willTrigger},c.addEventListener=function(g,f,j){var i;i=j?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var h=i[g];return h&&this.removeEventListener(g,f,j),h=i[g],h?h.push(f):i[g]=[f],f},c.on=function(h,g,l,k,j,i){return g.handleEvent&&(l=l||g,g=g.handleEvent),l=l||this,this.addEventListener(h,function(b){g.call(l,b,j),k&&b.remove()},i)},c.removeEventListener=function(i,h,n){var m=n?this._captureListeners:this._listeners;if(m){var l=m[i];if(l){for(var k=0,j=l.length;j>k;k++){if(l[k]==h){1==j?delete m[i]:l.splice(k,1);break}}}}},c.off=c.removeEventListener,c.removeAllEventListeners=function(b){b?(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null},c.dispatchEvent=function(r,q,p){if("string"==typeof r){var o=this._listeners;if(!(q||o&&o[r])){return !0}r=new createjs.Event(r,q,p)}else{r.target&&r.clone&&(r=r.clone())}try{r.target=this}catch(n){}if(r.bubbles&&this.parent){for(var m=this,l=[m];m.parent;){l.push(m=m.parent)}var k,j=l.length;for(k=j-1;k>=0&&!r.propagationStopped;k--){l[k]._dispatchEvent(r,1+(0==k))}for(k=1;j>k&&!r.propagationStopped;k++){l[k]._dispatchEvent(r,3)}}else{this._dispatchEvent(r,2)}return !r.defaultPrevented},c.hasEventListener=function(f){var e=this._listeners,g=this._captureListeners;return !!(e&&e[f]||g&&g[f])},c.willTrigger=function(f){for(var e=this;e;){if(e.hasEventListener(f)){return !0}e=e.parent}return !1},c.toString=function(){return"[EventDispatcher]"},c._dispatchEvent=function(j,i){var p,o,n=2>=i?this._captureListeners:this._listeners;if(j&&n&&(o=n[j.type])&&(p=o.length)){try{j.currentTarget=this}catch(m){}try{j.eventPhase=0|i}catch(m){}j.removed=!1,o=o.slice();for(var l=0;p>l&&!j.immediatePropagationStopped;l++){var k=o[l];k.handleEvent?k.handleEvent(j):k(j),j.removed&&(this.off(j.type,k,1==i),j.removed=!1)}}2===i&&this._dispatchEvent(j,2.1)},createjs.EventDispatcher=d}(),this.createjs=this.createjs||{},function(){function f(){throw"Ticker cannot be instantiated."}f.RAF_SYNCHED="synched",f.RAF="raf",f.TIMEOUT="timeout",f.timingMode=null,f.maxDelta=0,f.paused=!1,f.removeEventListener=null,f.removeAllEventListeners=null,f.dispatchEvent=null,f.hasEventListener=null,f._listeners=null,createjs.EventDispatcher.initialize(f),f._addEventListener=f.addEventListener,f.addEventListener=function(){return !f._inited&&f.init(),f._addEventListener.apply(f,arguments)},f._inited=!1,f._startTime=0,f._pausedTime=0,f._ticks=0,f._pausedTicks=0,f._interval=50,f._lastTime=0,f._times=null,f._tickTimes=null,f._timerId=null,f._raf=!0,f._setInterval=function(a){f._interval=a,f._inited&&f._setupTick()},f.setInterval=createjs.deprecate(f._setInterval,"Ticker.setInterval"),f._getInterval=function(){return f._interval},f.getInterval=createjs.deprecate(f._getInterval,"Ticker.getInterval"),f._setFPS=function(a){f._setInterval(1000/a)},f.setFPS=createjs.deprecate(f._setFPS,"Ticker.setFPS"),f._getFPS=function(){return 1000/f._interval},f.getFPS=createjs.deprecate(f._getFPS,"Ticker.getFPS");try{Object.defineProperties(f,{interval:{get:f._getInterval,set:f._setInterval},framerate:{get:f._getFPS,set:f._setFPS}})}catch(e){console.log(e)}f.init=function(){f._inited||(f._inited=!0,f._times=[],f._tickTimes=[],f._startTime=f._getTime(),f._times.push(f._lastTime=0),f.interval=f._interval)},f.reset=function(){if(f._raf){var a=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;a&&a(f._timerId)}else{clearTimeout(f._timerId)}f.removeAllEventListeners("tick"),f._timerId=f._times=f._tickTimes=null,f._startTime=f._lastTime=f._ticks=f._pausedTime=0,f._inited=!1},f.getMeasuredTickTime=function(a){var k=0,j=f._tickTimes;if(!j||j.length<1){return -1}a=Math.min(j.length,a||0|f._getFPS());for(var i=0;a>i;i++){k+=j[i]}return k/a},f.getMeasuredFPS=function(a){var d=f._times;return !d||d.length<2?-1:(a=Math.min(d.length-1,a||0|f._getFPS()),1000/((d[0]-d[a])/a))},f.getTime=function(a){return f._startTime?f._getTime()-(a?f._pausedTime:0):-1},f.getEventTime=function(a){return f._startTime?(f._lastTime||f._startTime)-(a?f._pausedTime:0):-1},f.getTicks=function(a){return f._ticks-(a?f._pausedTicks:0)},f._handleSynch=function(){f._timerId=null,f._setupTick(),f._getTime()-f._lastTime>=0.97*(f._interval-1)&&f._tick()},f._handleRAF=function(){f._timerId=null,f._setupTick(),f._tick()},f._handleTimeout=function(){f._timerId=null,f._setupTick(),f._tick()},f._setupTick=function(){if(null==f._timerId){var a=f.timingMode;if(a==f.RAF_SYNCHED||a==f.RAF){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(d){return f._timerId=d(a==f.RAF?f._handleRAF:f._handleSynch),void (f._raf=!0)}}f._raf=!1,f._timerId=setTimeout(f._handleTimeout,f._interval)}},f._tick=function(){var a=f.paused,l=f._getTime(),k=l-f._lastTime;if(f._lastTime=l,f._ticks++,a&&(f._pausedTicks++,f._pausedTime+=k),f.hasEventListener("tick")){var j=new createjs.Event("tick"),i=f.maxDelta;j.delta=i&&k>i?i:k,j.paused=a,j.time=l,j.runTime=l-f._pausedTime,f.dispatchEvent(j)}for(f._tickTimes.unshift(f._getTime()-l);f._tickTimes.length>100;){f._tickTimes.pop()}for(f._times.unshift(l);f._times.length>100;){f._times.pop()}};var h=window,g=h.performance.now||h.performance.mozNow||h.performance.msNow||h.performance.oNow||h.performance.webkitNow;f._getTime=function(){return(g&&g.call(h.performance)||(new Date).getTime())-f._startTime},createjs.Ticker=f}(),this.createjs=this.createjs||{},function(){function d(b){this.readyState=b.readyState,this._video=b,this._canvas=null,this._lastTime=-1,this.readyState<2&&b.addEventListener("canplaythrough",this._videoReady.bind(this))}var c=d.prototype;c.getImage=function(){if(!(this.readyState<2)){var f=this._canvas,e=this._video;if(f||(f=this._canvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),f.width=e.videoWidth,f.height=e.videoHeight),e.readyState>=2&&e.currentTime!==this._lastTime){var g=f.getContext("2d");g.clearRect(0,0,f.width,f.height),g.drawImage(e,0,0,f.width,f.height),this._lastTime=e.currentTime}return f}},c._videoReady=function(){this.readyState=2},createjs.VideoBuffer=d}(),this.createjs=this.createjs||{},function(){function e(v,u,t,s,r,q,p,o,n,m,l){this.Event_constructor(v,u,t),this.stageX=s,this.stageY=r,this.rawX=null==n?s:n,this.rawY=null==m?r:m,this.nativeEvent=q,this.pointerID=p,this.primary=!!o,this.relatedTarget=l}var d=createjs.extend(e,createjs.Event);d._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},d._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},d._get_isTouch=function(){return -1!==this.pointerID};try{Object.defineProperties(d,{localX:{get:d._get_localX},localY:{get:d._get_localY},isTouch:{get:d._get_isTouch}})}catch(f){}d.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},d.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){function d(h,g,l,k,j,i){this.setValues(h,g,l,k,j,i)}var c=d.prototype;d.DEG_TO_RAD=Math.PI/180,d.identity=null,c.setValues=function(h,g,l,k,j,i){return this.a=null==h?1:h,this.b=g||0,this.c=l||0,this.d=null==k?1:k,this.tx=j||0,this.ty=i||0,this},c.append=function(t,s,r,q,p,o){var n=this.a,m=this.b,l=this.c,k=this.d;return(1!=t||0!=s||0!=r||1!=q)&&(this.a=n*t+l*s,this.b=m*t+k*s,this.c=n*r+l*q,this.d=m*r+k*q),this.tx=n*p+l*o+this.tx,this.ty=m*p+k*o+this.ty,this},c.prepend=function(r,q,p,o,n,m){var l=this.a,k=this.c,j=this.tx;return this.a=r*l+p*this.b,this.b=q*l+o*this.b,this.c=r*k+p*this.d,this.d=q*k+o*this.d,this.tx=r*j+p*this.ty+n,this.ty=q*j+o*this.ty+m,this},c.appendMatrix=function(b){return this.append(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.prependMatrix=function(b){return this.prepend(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.appendTransform=function(x,w,v,u,t,s,r,q,p){if(t%360){var o=t*d.DEG_TO_RAD,n=Math.cos(o),a=Math.sin(o)}else{n=1,a=0}return s||r?(s*=d.DEG_TO_RAD,r*=d.DEG_TO_RAD,this.append(Math.cos(r),Math.sin(r),-Math.sin(s),Math.cos(s),x,w),this.append(n*v,a*v,-a*u,n*u,0,0)):this.append(n*v,a*v,-a*u,n*u,x,w),(q||p)&&(this.tx-=q*this.a+p*this.c,this.ty-=q*this.b+p*this.d),this},c.prependTransform=function(x,w,v,u,t,s,r,q,p){if(t%360){var o=t*d.DEG_TO_RAD,n=Math.cos(o),a=Math.sin(o)}else{n=1,a=0}return(q||p)&&(this.tx-=q,this.ty-=p),s||r?(s*=d.DEG_TO_RAD,r*=d.DEG_TO_RAD,this.prepend(n*v,a*v,-a*u,n*u,0,0),this.prepend(Math.cos(r),Math.sin(r),-Math.sin(s),Math.cos(s),x,w)):this.prepend(n*v,a*v,-a*u,n*u,x,w),this},c.rotate=function(a){a*=d.DEG_TO_RAD;var j=Math.cos(a),i=Math.sin(a),h=this.a,g=this.b;return this.a=h*j+this.c*i,this.b=g*j+this.d*i,this.c=-h*i+this.c*j,this.d=-g*i+this.d*j,this},c.skew=function(a,e){return a*=d.DEG_TO_RAD,e*=d.DEG_TO_RAD,this.append(Math.cos(e),Math.sin(e),-Math.sin(a),Math.cos(a),0,0),this},c.scale=function(f,e){return this.a*=f,this.b*=f,this.c*=e,this.d*=e,this},c.translate=function(f,e){return this.tx+=this.a*f+this.c*e,this.ty+=this.b*f+this.d*e,this},c.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},c.invert=function(){var h=this.a,g=this.b,l=this.c,k=this.d,j=this.tx,i=h*k-g*l;return this.a=k/i,this.b=-g/i,this.c=-l/i,this.d=h/i,this.tx=(l*this.ty-k*j)/i,this.ty=-(h*this.ty-g*j)/i,this},c.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},c.equals=function(b){return this.tx===b.tx&&this.ty===b.ty&&this.a===b.a&&this.b===b.b&&this.c===b.c&&this.d===b.d},c.transformPoint=function(f,e,g){return g=g||{},g.x=f*this.a+e*this.c+this.tx,g.y=f*this.b+e*this.d+this.ty,g},c.decompose=function(a){null==a&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var h=Math.atan2(-this.c,this.d),g=Math.atan2(this.b,this.a),f=Math.abs(1-h/g);return 0.00001>f?(a.rotation=g/d.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=h/d.DEG_TO_RAD,a.skewY=g/d.DEG_TO_RAD),a},c.copy=function(b){return this.setValues(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.clone=function(){return new d(this.a,this.b,this.c,this.d,this.tx,this.ty)},c.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},d.identity=new d,createjs.Matrix2D=d}(),this.createjs=this.createjs||{},function(){function d(g,f,j,i,h){this.setValues(g,f,j,i,h)}var c=d.prototype;c.setValues=function(g,f,j,i,h){return this.visible=null==g?!0:!!g,this.alpha=null==f?1:f,this.shadow=j,this.compositeOperation=i,this.matrix=h||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},c.append=function(g,f,j,i,h){return this.alpha*=f,this.shadow=j||this.shadow,this.compositeOperation=i||this.compositeOperation,this.visible=this.visible&&g,h&&this.matrix.appendMatrix(h),this},c.prepend=function(g,f,j,i,h){return this.alpha*=f,this.shadow=this.shadow||j,this.compositeOperation=this.compositeOperation||i,this.visible=this.visible&&g,h&&this.matrix.prependMatrix(h),this},c.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},c.clone=function(){return new d(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=d}(),this.createjs=this.createjs||{},function(){function d(f,e){this.setValues(f,e)}var c=d.prototype;c.setValues=function(f,e){return this.x=f||0,this.y=e||0,this},c.copy=function(b){return this.x=b.x,this.y=b.y,this},c.clone=function(){return new d(this.x,this.y)},c.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=d}(),this.createjs=this.createjs||{},function(){function d(f,e,h,g){this.setValues(f,e,h,g)}var c=d.prototype;c.setValues=function(f,e,h,g){return this.x=f||0,this.y=e||0,this.width=h||0,this.height=g||0,this},c.extend=function(f,e,h,g){return h=h||0,g=g||0,f+h>this.x+this.width&&(this.width=f+h-this.x),e+g>this.y+this.height&&(this.height=e+g-this.y),f<this.x&&(this.width+=this.x-f,this.x=f),e<this.y&&(this.height+=this.y-e,this.y=e),this},c.pad=function(f,e,h,g){return this.x-=e,this.y-=f,this.width+=e+g,this.height+=f+h,this},c.copy=function(b){return this.setValues(b.x,b.y,b.width,b.height)},c.contains=function(f,e,h,g){return h=h||0,g=g||0,f>=this.x&&f+h<=this.x+this.width&&e>=this.y&&e+g<=this.y+this.height},c.union=function(b){return this.clone().extend(b.x,b.y,b.width,b.height)},c.intersection=function(a){var j=a.x,i=a.y,h=j+a.width,g=i+a.height;return this.x>j&&(j=this.x),this.y>i&&(i=this.y),this.x+this.width<h&&(h=this.x+this.width),this.y+this.height<g&&(g=this.y+this.height),j>=h||i>=g?null:new d(j,i,h-j,g-i)},c.intersects=function(b){return b.x<=this.x+this.width&&this.x<=b.x+b.width&&b.y<=this.y+this.height&&this.y<=b.y+b.height},c.isEmpty=function(){return this.width<=0||this.height<=0},c.clone=function(){return new d(this.x,this.y,this.width,this.height)},c.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=d}(),this.createjs=this.createjs||{},function(){function e(i,h,n,m,l,k,j){i.addEventListener&&(this.target=i,this.overLabel=null==n?"over":n,this.outLabel=null==h?"out":h,this.downLabel=null==m?"down":m,this.play=l,this._isPressed=!1,this._isOver=!1,this._enabled=!1,i.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),k&&(j&&(k.actionsEnabled=!1,k.gotoAndStop&&k.gotoAndStop(j)),i.hitArea=k))}var d=e.prototype;d._setEnabled=function(g){if(g!=this._enabled){var c=this.target;this._enabled=g,g?(c.cursor="pointer",c.addEventListener("rollover",this),c.addEventListener("rollout",this),c.addEventListener("mousedown",this),c.addEventListener("pressup",this),c._reset&&(c.__reset=c._reset,c._reset=this._reset)):(c.cursor=null,c.removeEventListener("rollover",this),c.removeEventListener("rollout",this),c.removeEventListener("mousedown",this),c.removeEventListener("pressup",this),c.__reset&&(c._reset=c.__reset,delete c.__reset))}},d.setEnabled=createjs.deprecate(d._setEnabled,"ButtonHelper.setEnabled"),d._getEnabled=function(){return this._enabled},d.getEnabled=createjs.deprecate(d._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(d,{enabled:{get:d._getEnabled,set:d._setEnabled}})}catch(f){}d.toString=function(){return"[ButtonHelper]"},d.handleEvent=function(h){var g,j=this.target,i=h.type;"mousedown"==i?(this._isPressed=!0,g=this.downLabel):"pressup"==i?(this._isPressed=!1,g=this._isOver?this.overLabel:this.outLabel):"rollover"==i?(this._isOver=!0,g=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,g=this._isPressed?this.overLabel:this.outLabel),this.play?j.gotoAndPlay&&j.gotoAndPlay(g):j.gotoAndStop&&j.gotoAndStop(g)},d._reset=function(){var b=this.paused;this.__reset(),this.paused=b},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){function d(f,e,h,g){this.color=f||"black",this.offsetX=e||0,this.offsetY=h||0,this.blur=g||0}var c=d.prototype;d.identity=new d("transparent",0,0,0),c.toString=function(){return"[Shadow]"},c.clone=function(){return new d(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=d}(),this.createjs=this.createjs||{},function(){function e(b){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(b)}var d=createjs.extend(e,createjs.EventDispatcher);d._getAnimations=function(){return this._animations.slice()},d.getAnimations=createjs.deprecate(d._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(d,{animations:{get:d._getAnimations}})}catch(f){}d.getNumFrames=function(g){if(null==g){return this._frames?this._frames.length:this._numFrames||0}var c=this._data[g];return null==c?0:c.frames.length},d.getAnimation=function(b){return this._data[b]},d.getFrame=function(g){var c;return this._frames&&(c=this._frames[g])?c:null},d.getFrameBounds=function(h,g){var i=this.getFrame(h);return i?(g||new createjs.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},d.toString=function(){return"[SpriteSheet]"},d.clone=function(){throw"SpriteSheet cannot be cloned."},d._parseData=function(x){var w,v,u,t;if(null!=x){if(this.framerate=x.framerate||0,x.images&&(v=x.images.length)>0){for(t=this._images=[],w=0;v>w;w++){var s=x.images[w];if("string"==typeof s){var r=s;s=document.createElement("img"),s.src=r}t.push(s),s.getContext||s.naturalWidth||(this._loadCount++,this.complete=!1,function(g,c){s.onload=function(){g._handleImageLoad(c)}}(this,r),function(g,c){s.onerror=function(){g._handleImageError(c)}}(this,r))}}if(null==x.frames){}else{if(Array.isArray(x.frames)){for(this._frames=[],t=x.frames,w=0,v=t.length;v>w;w++){var q=t[w];this._frames.push({image:this._images[q[4]?q[4]:0],rect:new createjs.Rectangle(q[0],q[1],q[2],q[3]),regX:q[5]||0,regY:q[6]||0})}}else{u=x.frames,this._frameWidth=u.width,this._frameHeight=u.height,this._regX=u.regX||0,this._regY=u.regY||0,this._spacing=u.spacing||0,this._margin=u.margin||0,this._numFrames=u.count,0==this._loadCount&&this._calculateFrames()}}if(this._animations=[],null!=(u=x.animations)){this._data={};var p;for(p in u){var o={name:p},n=u[p];if("number"==typeof n){t=o.frames=[n]}else{if(Array.isArray(n)){if(1==n.length){o.frames=[n[0]]}else{for(o.speed=n[3],o.next=n[2],t=o.frames=[],w=n[0];w<=n[1];w++){t.push(w)}}}else{o.speed=n.speed,o.next=n.next;var m=n.frames;t=o.frames="number"==typeof m?[m]:m.slice(0)}}(o.next===!0||void 0===o.next)&&(o.next=p),(o.next===!1||t.length<2&&o.next==p)&&(o.next=null),o.speed||(o.speed=1),this._animations.push(p),this._data[p]=o}}}},d._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},d._handleImageError=function(g){var c=new createjs.Event("error");c.src=g,this.dispatchEvent(c),0==--this._loadCount&&this.dispatchEvent("complete")},d._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var z=this._numFrames||100000,y=0,x=this._frameWidth,w=this._frameHeight,v=this._spacing,u=this._margin;z:for(var t=0,s=this._images;t<s.length;t++){for(var r=s[t],q=r.width||r.naturalWidth,p=r.height||r.naturalHeight,o=u;p-u-w>=o;){for(var n=u;q-u-x>=n;){if(y>=z){break z}y++,this._frames.push({image:r,rect:new createjs.Rectangle(n,o,x,w),regX:this._regX,regY:this._regY}),n+=x+v}o+=w+v}}this._numFrames=y}},createjs.SpriteSheet=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function g(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var f=g.prototype,j=g;g.getRGB=function(k,e,m,l){return null!=k&&null==m&&(l=e,m=255&k,e=k>>8&255,k=k>>16&255),null==l?"rgb("+k+","+e+","+m+")":"rgba("+k+","+e+","+m+","+l+")"},g.getHSL=function(k,e,m,l){return null==l?"hsl("+k%360+","+e+"%,"+m+"%)":"hsla("+k%360+","+e+"%,"+m+"%,"+l+")"},g.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},g.STROKE_CAPS_MAP=["butt","round","square"],g.STROKE_JOINTS_MAP=["miter","round","bevel"];var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(g._ctx=i.getContext("2d"),i.width=i.height=1),f._getInstructions=function(){return this._updateInstructions(),this._instructions},f.getInstructions=createjs.deprecate(f._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(f,{instructions:{get:f._getInstructions}})}catch(h){}f.isEmpty=function(){return !(this._instructions.length||this._activeInstructions.length)},f.draw=function(l,k){this._updateInstructions();for(var o=this._instructions,n=this._storeIndex,m=o.length;m>n;n++){o[n].exec(l,k)}},f.drawAsPath=function(l){this._updateInstructions();for(var k,o=this._instructions,n=this._storeIndex,m=o.length;m>n;n++){(k=o[n]).path!==!1&&k.exec(l)}},f.moveTo=function(d,c){return this.append(new j.MoveTo(d,c),!0)},f.lineTo=function(d,c){return this.append(new j.LineTo(d,c))},f.arcTo=function(k,c,n,m,l){return this.append(new j.ArcTo(k,c,n,m,l))},f.arc=function(k,c,o,n,m,l){return this.append(new j.Arc(k,c,o,n,m,l))},f.quadraticCurveTo=function(k,c,m,l){return this.append(new j.QuadraticCurveTo(k,c,m,l))},f.bezierCurveTo=function(k,c,o,n,m,l){return this.append(new j.BezierCurveTo(k,c,o,n,m,l))},f.rect=function(k,c,m,l){return this.append(new j.Rect(k,c,m,l))},f.closePath=function(){return this._activeInstructions.length?this.append(new j.ClosePath):this},f.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},f.beginFill=function(b){return this._setFill(b?new j.Fill(b):null)},f.beginLinearGradientFill=function(k,c,o,n,m,l){return this._setFill((new j.Fill).linearGradient(k,c,o,n,m,l))},f.beginRadialGradientFill=function(k,c,q,p,o,n,m,l){return this._setFill((new j.Fill).radialGradient(k,c,q,p,o,n,m,l))},f.beginBitmapFill=function(e,c,k){return this._setFill(new j.Fill(null,k).bitmap(e,c))},f.endFill=function(){return this.beginFill()},f.setStrokeStyle=function(k,c,n,m,l){return this._updateInstructions(!0),this._strokeStyle=this.command=new j.StrokeStyle(k,c,n,m,l),this._stroke&&(this._stroke.ignoreScale=l),this._strokeIgnoreScale=l,this},f.setStrokeDash=function(d,c){return this._updateInstructions(!0),this._strokeDash=this.command=new j.StrokeDash(d,c),this},f.beginStroke=function(b){return this._setStroke(b?new j.Stroke(b):null)},f.beginLinearGradientStroke=function(k,c,o,n,m,l){return this._setStroke((new j.Stroke).linearGradient(k,c,o,n,m,l))},f.beginRadialGradientStroke=function(k,c,q,p,o,n,m,l){return this._setStroke((new j.Stroke).radialGradient(k,c,q,p,o,n,m,l))},f.beginBitmapStroke=function(d,c){return this._setStroke((new j.Stroke).bitmap(d,c))},f.endStroke=function(){return this.beginStroke()},f.curveTo=f.quadraticCurveTo,f.drawRect=f.rect,f.drawRoundRect=function(l,k,o,n,m){return this.drawRoundRectComplex(l,k,o,n,m,m,m,m)},f.drawRoundRectComplex=function(k,c,q,p,o,n,m,l){return this.append(new j.RoundRect(k,c,q,p,o,n,m,l))},f.drawCircle=function(e,c,k){return this.append(new j.Circle(e,c,k))},f.drawEllipse=function(k,c,m,l){return this.append(new j.Ellipse(k,c,m,l))},f.drawPolyStar=function(k,c,o,n,m,l){return this.append(new j.PolyStar(k,c,o,n,m,l))},f.append=function(d,c){return this._activeInstructions.push(d),this.command=d,c||(this._dirty=!0),this},f.decodePath=function(J){for(var I=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],H=[2,2,4,6,0],G=0,F=J.length,E=[],D=0,C=0,B=g.BASE_64;F>G;){var A=J.charAt(G),z=B[A],y=z>>3,x=I[y];if(!x||3&z){throw"bad path data (@"+G+"): "+A}var w=H[y];y||(D=C=0),E.length=0,G++;for(var v=(z>>2&1)+2,u=0;w>u;u++){var t=B[J.charAt(G)],a=t>>5?-1:1;t=(31&t)<<6|B[J.charAt(G+1)],3==v&&(t=t<<6|B[J.charAt(G+2)]),t=a*t/10,u%2?D=t+=D:C=t+=C,E[u]=t,G+=v}x.apply(this,E)}return this},f.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},f.unstore=function(){return this._storeIndex=0,this},f.clone=function(){var a=new g;return a.command=this.command,a._stroke=this._stroke,a._strokeStyle=this._strokeStyle,a._strokeDash=this._strokeDash,a._strokeIgnoreScale=this._strokeIgnoreScale,a._fill=this._fill,a._instructions=this._instructions.slice(),a._commitIndex=this._commitIndex,a._activeInstructions=this._activeInstructions.slice(),a._dirty=this._dirty,a._storeIndex=this._storeIndex,a},f.toString=function(){return"[Graphics]"},f.mt=f.moveTo,f.lt=f.lineTo,f.at=f.arcTo,f.bt=f.bezierCurveTo,f.qt=f.quadraticCurveTo,f.a=f.arc,f.r=f.rect,f.cp=f.closePath,f.c=f.clear,f.f=f.beginFill,f.lf=f.beginLinearGradientFill,f.rf=f.beginRadialGradientFill,f.bf=f.beginBitmapFill,f.ef=f.endFill,f.ss=f.setStrokeStyle,f.sd=f.setStrokeDash,f.s=f.beginStroke,f.ls=f.beginLinearGradientStroke,f.rs=f.beginRadialGradientStroke,f.bs=f.beginBitmapStroke,f.es=f.endStroke,f.dr=f.drawRect,f.rr=f.drawRoundRect,f.rc=f.drawRoundRectComplex,f.dc=f.drawCircle,f.de=f.drawEllipse,f.dp=f.drawPolyStar,f.p=f.decodePath,f._updateInstructions=function(a){var p=this._instructions,o=this._activeInstructions,n=this._commitIndex;if(this._dirty&&o.length){p.length=n,p.push(g.beginCmd);var m=o.length,l=p.length;p.length=l+m;for(var k=0;m>k;k++){p[k+l]=o[k]}this._fill&&p.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&p.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&p.push(this._strokeStyle),a&&(this._oldStrokeStyle=this._strokeStyle,this._oldStrokeDash=this._strokeDash),p.push(this._stroke)),this._dirty=!1}a&&(o.length=0,this._commitIndex=p.length)},f._setFill=function(b){return this._updateInstructions(!0),this.command=this._fill=b,this},f._setStroke=function(b){return this._updateInstructions(!0),(this.command=this._stroke=b)&&(b.ignoreScale=this._strokeIgnoreScale),this},(j.LineTo=function(d,c){this.x=d,this.y=c}).prototype.exec=function(b){b.lineTo(this.x,this.y)},(j.MoveTo=function(d,c){this.x=d,this.y=c}).prototype.exec=function(b){b.moveTo(this.x,this.y)},(j.ArcTo=function(l,k,o,n,m){this.x1=l,this.y1=k,this.x2=o,this.y2=n,this.radius=m}).prototype.exec=function(b){b.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(j.Arc=function(l,k,p,o,n,m){this.x=l,this.y=k,this.radius=p,this.startAngle=o,this.endAngle=n,this.anticlockwise=!!m}).prototype.exec=function(b){b.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(j.QuadraticCurveTo=function(k,e,m,l){this.cpx=k,this.cpy=e,this.x=m,this.y=l}).prototype.exec=function(b){b.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(j.BezierCurveTo=function(l,k,p,o,n,m){this.cp1x=l,this.cp1y=k,this.cp2x=p,this.cp2y=o,this.x=n,this.y=m}).prototype.exec=function(b){b.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(j.Rect=function(k,e,m,l){this.x=k,this.y=e,this.w=m,this.h=l}).prototype.exec=function(b){b.rect(this.x,this.y,this.w,this.h)},(j.ClosePath=function(){}).prototype.exec=function(b){b.closePath()},(j.BeginPath=function(){}).prototype.exec=function(b){b.beginPath()},f=(j.Fill=function(d,c){this.style=d,this.matrix=c}).prototype,f.exec=function(d){if(this.style){d.fillStyle=this.style;var c=this.matrix;c&&(d.save(),d.transform(c.a,c.b,c.c,c.d,c.tx,c.ty)),d.fill(),c&&d.restore()}},f.linearGradient=function(r,q,p,o,n,m){for(var l=this.style=g._ctx.createLinearGradient(p,o,n,m),k=0,a=r.length;a>k;k++){l.addColorStop(q[k],r[k])}return l.props={colors:r,ratios:q,x0:p,y0:o,x1:n,y1:m,type:"linear"},this},f.radialGradient=function(v,u,t,s,r,q,p,o){for(var n=this.style=g._ctx.createRadialGradient(t,s,r,q,p,o),m=0,a=v.length;a>m;m++){n.addColorStop(u[m],v[m])}return n.props={colors:v,ratios:u,x0:t,y0:s,r0:r,x1:q,y1:p,r1:o,type:"radial"},this},f.bitmap=function(a,k){if(a.naturalWidth||a.getContext||a.readyState>=2){var e=this.style=g._ctx.createPattern(a,k||"");e.props={image:a,repetition:k,type:"bitmap"}}return this},f.path=!1,f=(j.Stroke=function(d,c){this.style=d,this.ignoreScale=c}).prototype,f.exec=function(b){this.style&&(b.strokeStyle=this.style,this.ignoreScale&&(b.save(),b.setTransform(1,0,0,1,0,0)),b.stroke(),this.ignoreScale&&b.restore())},f.linearGradient=j.Fill.prototype.linearGradient,f.radialGradient=j.Fill.prototype.radialGradient,f.bitmap=j.Fill.prototype.bitmap,f.path=!1,f=(j.StrokeStyle=function(l,k,o,n,m){this.width=l,this.caps=k,this.joints=o,this.miterLimit=n,this.ignoreScale=m}).prototype,f.exec=function(a){a.lineWidth=null==this.width?"1":this.width,a.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:g.STROKE_CAPS_MAP[this.caps],a.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:g.STROKE_JOINTS_MAP[this.joints],a.miterLimit=null==this.miterLimit?"10":this.miterLimit,a.ignoreScale=null==this.ignoreScale?!1:this.ignoreScale},f.path=!1,(j.StrokeDash=function(d,c){this.segments=d,this.offset=c||0}).prototype.exec=function(b){b.setLineDash&&(b.setLineDash(this.segments||j.StrokeDash.EMPTY_SEGMENTS),b.lineDashOffset=this.offset||0)},j.StrokeDash.EMPTY_SEGMENTS=[],(j.RoundRect=function(l,k,r,q,p,o,n,m){this.x=l,this.y=k,this.w=r,this.h=q,this.radiusTL=p,this.radiusTR=o,this.radiusBR=n,this.radiusBL=m}).prototype.exec=function(B){var A=(s>t?t:s)/2,z=0,y=0,x=0,w=0,v=this.x,u=this.y,t=this.w,s=this.h,r=this.radiusTL,q=this.radiusTR,p=this.radiusBR,o=this.radiusBL;0>r&&(r*=z=-1),r>A&&(r=A),0>q&&(q*=y=-1),q>A&&(q=A),0>p&&(p*=x=-1),p>A&&(p=A),0>o&&(o*=w=-1),o>A&&(o=A),B.moveTo(v+t-q,u),B.arcTo(v+t+q*y,u-q*y,v+t,u+q,q),B.lineTo(v+t,u+s-p),B.arcTo(v+t+p*x,u+s+p*x,v+t-p,u+s,p),B.lineTo(v+o,u+s),B.arcTo(v-o*w,u+s+o*w,v,u+s-o,o),B.lineTo(v,u+r),B.arcTo(v-r*z,u-r*z,v+r,u,r),B.closePath()},(j.Circle=function(e,d,k){this.x=e,this.y=d,this.radius=k}).prototype.exec=function(b){b.arc(this.x,this.y,this.radius,0,2*Math.PI)},(j.Ellipse=function(k,e,m,l){this.x=k,this.y=e,this.w=m,this.h=l}).prototype.exec=function(x){var w=this.x,v=this.y,u=this.w,t=this.h,s=0.5522848,r=u/2*s,q=t/2*s,p=w+u,o=v+t,n=w+u/2,m=v+t/2;x.moveTo(w,m),x.bezierCurveTo(w,m-q,n-r,v,n,v),x.bezierCurveTo(n+r,v,p,m-q,p,m),x.bezierCurveTo(p,m+q,n+r,o,n,o),x.bezierCurveTo(n-r,o,w,m+q,w,m)},(j.PolyStar=function(l,k,p,o,n,m){this.x=l,this.y=k,this.radius=p,this.sides=o,this.pointSize=n,this.angle=m}).prototype.exec=function(s){var r=this.x,q=this.y,p=this.radius,o=(this.angle||0)/180*Math.PI,n=this.sides,m=1-(this.pointSize||0),l=Math.PI/n;s.moveTo(r+Math.cos(o)*p,q+Math.sin(o)*p);for(var k=0;n>k;k++){o+=l,1!=m&&s.lineTo(r+Math.cos(o)*p*m,q+Math.sin(o)*p*m),o+=l,s.lineTo(r+Math.cos(o)*p,q+Math.sin(o)*p)}s.closePath()},g.beginCmd=new j.BeginPath,createjs.Graphics=g}(),this.createjs=this.createjs||{},function(){function f(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null,this._webGLRenderStyle=f._StageGL_NONE}var e=createjs.extend(f,createjs.EventDispatcher);f._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],f.suppressCrossDomainErrors=!1,f._snapToPixelEnabled=!1,f._StageGL_NONE=0,f._StageGL_SPRITE=1,f._StageGL_BITMAP=2;var h=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");h.getContext&&(f._hitTestCanvas=h,f._hitTestContext=h.getContext("2d"),h.width=h.height=1),e._getStage=function(){for(var d=this,c=createjs.Stage;d.parent;){d=d.parent}return d instanceof c?d:null},e.getStage=createjs.deprecate(e._getStage,"DisplayObject.getStage");try{Object.defineProperties(e,{stage:{get:e._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(b){this.bitmapCache&&(this.bitmapCache.cacheID=b)}},scale:{get:function(){return this.scaleX},set:function(b){this.scaleX=this.scaleY=b}}})}catch(g){}e.isVisible=function(){return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(i,d){var j=this.bitmapCache;return j&&!d?j.draw(i):!1},e.updateContext=function(a){var m=this,l=m.mask,k=m._props.matrix;l&&l.graphics&&!l.graphics.isEmpty()&&(l.getMatrix(k),a.transform(k.a,k.b,k.c,k.d,k.tx,k.ty),l.graphics.drawAsPath(a),a.clip(),k.invert(),a.transform(k.a,k.b,k.c,k.d,k.tx,k.ty)),this.getMatrix(k);var j=k.tx,i=k.ty;f._snapToPixelEnabled&&m.snapToPixel&&(j=j+(0>j?-0.5:0.5)|0,i=i+(0>i?-0.5:0.5)|0),a.transform(k.a,k.b,k.c,k.d,j,i),a.globalAlpha*=m.alpha,m.compositeOperation&&(a.globalCompositeOperation=m.compositeOperation),m.shadow&&this._applyShadow(a,m.shadow)},e.cache=function(j,i,n,m,l,k){this.bitmapCache||(this.bitmapCache=new createjs.BitmapCache),this.bitmapCache.define(this,j,i,n,m,l,k)},e.updateCache=function(b){if(!this.bitmapCache){throw"cache() must be called before updateCache()"}this.bitmapCache.update(b)},e.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},e.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},e.localToGlobal=function(i,d,j){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(i,d,j||new createjs.Point)},e.globalToLocal=function(i,d,j){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(i,d,j||new createjs.Point)},e.localToLocal=function(j,i,l,k){return k=this.localToGlobal(j,i,k),l.globalToLocal(k.x,k.y,k)},e.setTransform=function(r,q,p,o,n,m,l,k,j){return this.x=r||0,this.y=q||0,this.scaleX=null==p?1:p,this.scaleY=null==o?1:o,this.rotation=n||0,this.skewX=m||0,this.skewY=l||0,this.regX=k||0,this.regY=j||0,this},e.getMatrix=function(i){var d=this,j=i&&i.identity()||new createjs.Matrix2D;return d.transformMatrix?j.copy(d.transformMatrix):j.appendTransform(d.x,d.y,d.scaleX,d.scaleY,d.rotation,d.skewX,d.skewY,d.regX,d.regY)},e.getConcatenatedMatrix=function(i){for(var d=this,j=this.getMatrix(i);d=d.parent;){j.prependMatrix(d.getMatrix(d._props.matrix))}return j},e.getConcatenatedDisplayProps=function(i){i=i?i.identity():new createjs.DisplayProps;var d=this,j=d.getMatrix(i.matrix);do{i.prepend(d.visible,d.alpha,d.shadow,d.compositeOperation),d!=this&&j.prependMatrix(d.getMatrix(d._props.matrix))}while(d=d.parent);return i},e.hitTest=function(a,k){var j=f._hitTestContext;j.setTransform(1,0,0,1,-a,-k),this.draw(j);var i=this._testHit(j);return j.setTransform(1,0,0,1,0,0),j.clearRect(0,0,2,2),i},e.set=function(d){for(var c in d){this[c]=d[c]}return this},e.getBounds=function(){if(this._bounds){return this._rectangle.copy(this._bounds)}var d=this.cacheCanvas;if(d){var c=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,d.width/c,d.height/c)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(j,i,l,k){return null==j?void (this._bounds=j):void (this._bounds=(this._bounds||new createjs.Rectangle).setValues(j,i,l,k))},e.clone=function(){return this._cloneProps(new f)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._updateState=null,e._cloneProps=function(b){return b.alpha=this.alpha,b.mouseEnabled=this.mouseEnabled,b.tickEnabled=this.tickEnabled,b.name=this.name,b.regX=this.regX,b.regY=this.regY,b.rotation=this.rotation,b.scaleX=this.scaleX,b.scaleY=this.scaleY,b.shadow=this.shadow,b.skewX=this.skewX,b.skewY=this.skewY,b.visible=this.visible,b.x=this.x,b.y=this.y,b.compositeOperation=this.compositeOperation,b.snapToPixel=this.snapToPixel,b.filters=null==this.filters?null:this.filters.slice(0),b.mask=this.mask,b.hitArea=this.hitArea,b.cursor=this.cursor,b._bounds=this._bounds,b},e._applyShadow=function(d,c){c=c||Shadow.identity,d.shadowColor=c.color,d.shadowOffsetX=c.offsetX,d.shadowOffsetY=c.offsetY,d.shadowBlur=c.blur},e._tick=function(d){var c=this._listeners;c&&c.tick&&(d.target=null,d.propagationStopped=d.immediatePropagationStopped=!1,this.dispatchEvent(d))},e._testHit=function(a){try{var j=a.getImageData(0,0,1,1).data[3]>1}catch(i){if(!f.suppressCrossDomainErrors){throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}}return j},e._getBounds=function(d,c){return this._transformBounds(this.getBounds(),d,c)},e._transformBounds=function(J,I,H){if(!J){return J}var G=J.x,F=J.y,E=J.width,D=J.height,C=this._props.matrix;C=H?C.identity():this.getMatrix(C),(G||F)&&C.appendTransform(0,0,1,1,0,0,0,-G,-F),I&&C.prependMatrix(I);var B=E*C.a,A=E*C.b,z=D*C.c,y=D*C.d,x=C.tx,w=C.ty,v=x,u=x,t=w,s=w;return(G=B+x)<v?v=G:G>u&&(u=G),(G=B+z+x)<v?v=G:G>u&&(u=G),(G=z+x)<v?v=G:G>u&&(u=G),(F=A+w)<t?t=F:F>s&&(s=F),(F=A+y+w)<t?t=F:F>s&&(s=F),(F=y+w)<t?t=F:F>s&&(s=F),J.setValues(v,t,u-v,s-t)},e._hasMouseEventListener=function(){for(var a=f._MOUSE_EVENTS,j=0,i=a.length;i>j;j++){if(this.hasEventListener(a[j])){return !0}}return !!this.cursor},createjs.DisplayObject=createjs.promote(f,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var d=createjs.extend(e,createjs.DisplayObject);d._getNumChildren=function(){return this.children.length},d.getNumChildren=createjs.deprecate(d._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(d,{numChildren:{get:d._getNumChildren}})}catch(f){}d.initialize=e,d.isVisible=function(){var b=this.cacheCanvas||this.children.length;return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},d.draw=function(h,g){if(this.DisplayObject_draw(h,g)){return !0}for(var l=this.children.slice(),k=0,j=l.length;j>k;k++){var i=l[k];i.isVisible()&&(h.save(),i.updateContext(h),i.draw(h),h.restore())}return !0},d.addChild=function(h){if(null==h){return h}var g=arguments.length;if(g>1){for(var k=0;g>k;k++){this.addChild(arguments[k])}return arguments[g-1]}var j=h.parent,i=j===this;return j&&j._removeChildAt(createjs.indexOf(j.children,h),i),h.parent=this,this.children.push(h),i||h.dispatchEvent("added"),h},d.addChildAt=function(i,h){var n=arguments.length,m=arguments[n-1];if(0>m||m>this.children.length){return arguments[n-2]}if(n>2){for(var l=0;n-1>l;l++){this.addChildAt(arguments[l],m+l)}return arguments[n-2]}var k=i.parent,j=k===this;return k&&k._removeChildAt(createjs.indexOf(k.children,i),j),i.parent=this,this.children.splice(h,0,i),j||i.dispatchEvent("added"),i},d.removeChild=function(h){var g=arguments.length;if(g>1){for(var j=!0,i=0;g>i;i++){j=j&&this.removeChild(arguments[i])}return j}return this._removeChildAt(createjs.indexOf(this.children,h))},d.removeChildAt=function(h){var g=arguments.length;if(g>1){for(var k=[],j=0;g>j;j++){k[j]=arguments[j]}k.sort(function(l,c){return c-l});for(var i=!0,j=0;g>j;j++){i=i&&this._removeChildAt(k[j])}return i}return this._removeChildAt(h)},d.removeAllChildren=function(){for(var b=this.children;b.length;){this._removeChildAt(0)}},d.getChildAt=function(b){return this.children[b]},d.getChildByName=function(h){for(var g=this.children,j=0,i=g.length;i>j;j++){if(g[j].name==h){return g[j]}}return null},d.sortChildren=function(b){this.children.sort(b)},d.getChildIndex=function(b){return createjs.indexOf(this.children,b)},d.swapChildrenAt=function(h,g){var k=this.children,j=k[h],i=k[g];j&&i&&(k[h]=i,k[g]=j)},d.swapChildren=function(i,h){for(var n,m,l=this.children,k=0,j=l.length;j>k&&(l[k]==i&&(n=k),l[k]==h&&(m=k),null==n||null==m);k++){}k!=j&&(l[n]=h,l[m]=i)},d.setChildIndex=function(h,g){var k=this.children,j=k.length;if(!(h.parent!=this||0>g||g>=j)){for(var i=0;j>i&&k[i]!=h;i++){}i!=j&&i!=g&&(k.splice(i,1),k.splice(g,0,h))}},d.contains=function(b){for(;b;){if(b==this){return !0}b=b.parent}return !1},d.hitTest=function(g,c){return null!=this.getObjectUnderPoint(g,c)},d.getObjectsUnderPoint=function(h,g,k){var j=[],i=this.localToGlobal(h,g);return this._getObjectsUnderPoint(i.x,i.y,j,k>0,1==k),j},d.getObjectUnderPoint=function(h,g,j){var i=this.localToGlobal(h,g);return this._getObjectsUnderPoint(i.x,i.y,null,j>0,1==j)},d.getBounds=function(){return this._getBounds(null,!0)},d.getTransformedBounds=function(){return this._getBounds()},d.clone=function(a){var g=this._cloneProps(new e);return a&&this._cloneChildren(g),g},d.toString=function(){return"[Container (name="+this.name+")]"},d._tick=function(h){if(this.tickChildren){for(var g=this.children.length-1;g>=0;g--){var i=this.children[g];i.tickEnabled&&i._tick&&i._tick(h)}}this.DisplayObject__tick(h)},d._cloneChildren=function(h){h.children.length&&h.removeAllChildren();for(var g=h.children,k=0,j=this.children.length;j>k;k++){var i=this.children[k].clone(!0);i.parent=h,g.push(i)}},d._removeChildAt=function(h,g){if(0>h||h>this.children.length-1){return !1}var i=this.children[h];return i&&(i.parent=null),this.children.splice(h,1),g||i.dispatchEvent("removed"),!0},d._getObjectsUnderPoint=function(D,C,B,A,z,y){if(y=y||0,!y&&!this._testMask(this,D,C)){return null}var x,w=createjs.DisplayObject._hitTestContext;z=z||A&&this._hasMouseEventListener();for(var v=this.children,u=v.length,t=u-1;t>=0;t--){var s=v[t],r=s.hitArea;if(s.visible&&(r||s.isVisible())&&(!A||s.mouseEnabled)&&(r||this._testMask(s,D,C))){if(!r&&s instanceof e){var q=s._getObjectsUnderPoint(D,C,B,A,z,y+1);if(!B&&q){return A&&!this.mouseChildren?this:q}}else{if(A&&!z&&!s._hasMouseEventListener()){continue}var a=s.getConcatenatedDisplayProps(s._props);if(x=a.matrix,r&&(x.appendMatrix(r.getMatrix(r._props.matrix)),a.alpha=r.alpha),w.globalAlpha=a.alpha,w.setTransform(x.a,x.b,x.c,x.d,x.tx-D,x.ty-C),(r||s).draw(w),!this._testHit(w)){continue}if(w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,2,2),!B){return A&&!this.mouseChildren?this:s}B.push(s)}}}return null},d._testMask=function(i,h,n){var m=i.mask;if(!m||!m.graphics||m.graphics.isEmpty()){return !0}var l=this._props.matrix,k=i.parent;l=k?k.getConcatenatedMatrix(l):l.identity(),l=m.getMatrix(m._props.matrix).prependMatrix(l);var j=createjs.DisplayObject._hitTestContext;return j.setTransform(l.a,l.b,l.c,l.d,l.tx-h,l.ty-n),m.graphics.drawAsPath(j),j.fillStyle="#000",j.fill(),this._testHit(j)?(j.setTransform(1,0,0,1,0,0),j.clearRect(0,0,2,2),!0):!1},d._getBounds=function(j,i){var p=this.DisplayObject_getBounds();if(p){return this._transformBounds(p,j,i)}var o=this._props.matrix;o=i?o.identity():this.getMatrix(o),j&&o.prependMatrix(j);for(var n=this.children.length,m=null,l=0;n>l;l++){var k=this.children[l];k.visible&&(p=k._getBounds(o))&&(m?m.extend(p.x,p.y,p.width,p.height):m=p.clone())}return m},createjs.Container=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function e(b){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof b?document.getElementById(b):b,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var d=createjs.extend(e,createjs.Container);d._get_nextStage=function(){return this._nextStage},d._set_nextStage=function(b){this._nextStage&&(this._nextStage._prevStage=null),b&&(b._prevStage=this),this._nextStage=b};try{Object.defineProperties(d,{nextStage:{get:d._get_nextStage,set:d._set_nextStage}})}catch(f){}d.update=function(h){if(this.canvas&&(this.tickOnUpdate&&this.tick(h),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var g=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(g?i.clearRect(g.x,g.y,g.width,g.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(g.x,g.y,g.width,g.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},d.tick=function(h){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var g=new createjs.Event("tick");if(h){for(var i in h){h.hasOwnProperty(i)&&(g[i]=h[i])}}this._tick(g),this.dispatchEvent("tickend")}},d.handleEvent=function(b){"tick"==b.type&&this.update(b)},d.clear=function(){if(this.canvas){var b=this.canvas.getContext("2d");b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},d.toDataURL=function(j,i){var p,o=this.canvas.getContext("2d"),n=this.canvas.width,m=this.canvas.height;if(j){p=o.getImageData(0,0,n,m);var l=o.globalCompositeOperation;o.globalCompositeOperation="destination-over",o.fillStyle=j,o.fillRect(0,0,n,m)}var k=this.canvas.toDataURL(i||"image/png");return j&&(o.putImageData(p,0,0),o.globalCompositeOperation=l),k},d.enableMouseOver=function(g){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==g&&this._testMouseOver(!0)),null==g){g=20}else{if(0>=g){return}}var c=this;this._mouseOverIntervalID=setInterval(function(){c._testMouseOver()},1000/Math.min(50,g))},d.enableDOMEvents=function(h){null==h&&(h=!0);var g,l,k=this._eventListeners;if(!h&&k){for(g in k){l=k[g],l.t.removeEventListener(g,l.f,!1)}this._eventListeners=null}else{if(h&&!k&&this.canvas){var j=window.addEventListener?window:document,i=this;k=this._eventListeners={},k.mouseup={t:j,f:function(b){i._handleMouseUp(b)}},k.mousemove={t:j,f:function(b){i._handleMouseMove(b)}},k.dblclick={t:this.canvas,f:function(b){i._handleDoubleClick(b)}},k.mousedown={t:this.canvas,f:function(b){i._handleMouseDown(b)}};for(g in k){l=k[g],l.t.addEventListener(g,l.f,!1)}}}},d.clone=function(){throw"Stage cannot be cloned."},d.toString=function(){return"[Stage (name="+this.name+")]"},d._getElementRect=function(t){var s;try{s=t.getBoundingClientRect()}catch(r){s={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var q=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),p=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),o=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,n=parseInt(o.paddingLeft)+parseInt(o.borderLeftWidth),m=parseInt(o.paddingTop)+parseInt(o.borderTopWidth),l=parseInt(o.paddingRight)+parseInt(o.borderRightWidth),k=parseInt(o.paddingBottom)+parseInt(o.borderBottomWidth);return{left:s.left+q+n,right:s.right+q-l,top:s.top+p+m,bottom:s.bottom+p-k}},d._getPointerData=function(g){var c=this._pointerData[g];return c||(c=this._pointerData[g]={x:0,y:0}),c},d._handleMouseMove=function(b){b||(b=window.event),this._handlePointerMove(-1,b,b.pageX,b.pageY)},d._handlePointerMove=function(j,i,p,o,n){if((!this._prevStage||void 0!==n)&&this.canvas){var m=this._nextStage,l=this._getPointerData(j),k=l.inBounds;this._updatePointerPosition(j,i,p,o),(k||l.inBounds||this.mouseMoveOutside)&&(-1===j&&l.inBounds==!k&&this._dispatchMouseEvent(this,k?"mouseleave":"mouseenter",!1,j,l,i),this._dispatchMouseEvent(this,"stagemousemove",!1,j,l,i),this._dispatchMouseEvent(l.target,"pressmove",!0,j,l,i)),m&&m._handlePointerMove(j,i,p,o,null)}},d._updatePointerPosition=function(j,i,p,o){var n=this._getElementRect(this.canvas);p-=n.left,o-=n.top;var m=this.canvas.width,l=this.canvas.height;p/=(n.right-n.left)/m,o/=(n.bottom-n.top)/l;var k=this._getPointerData(j);(k.inBounds=p>=0&&o>=0&&m-1>=p&&l-1>=o)?(k.x=p,k.y=o):this.mouseMoveOutside&&(k.x=0>p?0:p>m-1?m-1:p,k.y=0>o?0:o>l-1?l-1:o),k.posEvtObj=i,k.rawX=p,k.rawY=o,(j===this._primaryPointerID||-1===j)&&(this.mouseX=k.x,this.mouseY=k.y,this.mouseInBounds=k.inBounds)},d._handleMouseUp=function(b){this._handlePointerUp(-1,b,!1)},d._handlePointerUp=function(j,i,p,o){var n=this._nextStage,m=this._getPointerData(j);if(!this._prevStage||void 0!==o){var l=null,k=m.target;o||!k&&!n||(l=this._getObjectsUnderPoint(m.x,m.y,null,!0)),m.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,j,m,i,l),m.down=!1),l==k&&this._dispatchMouseEvent(k,"click",!0,j,m,i),this._dispatchMouseEvent(k,"pressup",!0,j,m,i),p?(j==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[j]):m.target=null,n&&n._handlePointerUp(j,i,p,o||l&&this)}},d._handleMouseDown=function(b){this._handlePointerDown(-1,b,b.pageX,b.pageY)},d._handlePointerDown=function(j,i,p,o,n){this.preventSelection&&i.preventDefault(),(null==this._primaryPointerID||-1===j)&&(this._primaryPointerID=j),null!=o&&this._updatePointerPosition(j,i,p,o);var m=null,l=this._nextStage,k=this._getPointerData(j);n||(m=k.target=this._getObjectsUnderPoint(k.x,k.y,null,!0)),k.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,j,k,i,m),k.down=!0),this._dispatchMouseEvent(m,"mousedown",!0,j,k,i),l&&l._handlePointerDown(j,i,p,o,n||m&&this)},d._testMouseOver=function(F,E,D){if(!this._prevStage||void 0!==E){var C=this._nextStage;if(!this._mouseOverIntervalID){return void (C&&C._testMouseOver(F,E,D))}var B=this._getPointerData(-1);if(B&&(F||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var A,z,y,x=B.posEvtObj,w=D||x&&x.target==this.canvas,v=null,u=-1,t="";!E&&(F||this.mouseInBounds&&w)&&(v=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var s=this._mouseOverTarget||[],r=s[s.length-1],q=this._mouseOverTarget=[];for(A=v;A;){q.unshift(A),t||(t=A.cursor),A=A.parent}for(this.canvas.style.cursor=t,!E&&D&&(D.canvas.style.cursor=t),z=0,y=q.length;y>z&&q[z]==s[z];z++){u=z}for(r!=v&&this._dispatchMouseEvent(r,"mouseout",!0,-1,B,x,v),z=s.length-1;z>u;z--){this._dispatchMouseEvent(s[z],"rollout",!1,-1,B,x,v)}for(z=q.length-1;z>u;z--){this._dispatchMouseEvent(q[z],"rollover",!1,-1,B,x,r)}r!=v&&this._dispatchMouseEvent(v,"mouseover",!0,-1,B,x,r),C&&C._testMouseOver(F,E||v&&this,D||w&&this)}}},d._handleDoubleClick=function(h,g){var k=null,j=this._nextStage,i=this._getPointerData(-1);g||(k=this._getObjectsUnderPoint(i.x,i.y,null,!0),this._dispatchMouseEvent(k,"dblclick",!0,-1,i,h)),j&&j._handleDoubleClick(h,g||k&&this)},d._dispatchMouseEvent=function(j,i,p,o,n,m,l){if(j&&(p||j.hasEventListener(i))){var k=new createjs.MouseEvent(i,p,!1,n.x,n.y,m,o,o===this._primaryPointerID||-1===o,n.rawX,n.rawY,l);j.dispatchEvent(k)}},createjs.Stage=createjs.promote(e,"Container")}(),this.createjs=this.createjs||{},function(){function e(a,n){if(this.Stage_constructor(a),void 0!==n){if("object"!=typeof n){throw"Invalid options object"}var m=n.premultiply,l=n.transparent,k=n.antialias,j=n.preserveBuffer,i=n.autoPurge}this.vocalDebug=!1,this._preserveBuffer=j||!1,this._antialias=k||!1,this._transparent=l||!1,this._premultiply=m||!1,this._autoPurge=void 0,this.autoPurge=i,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._clearColor={r:0.5,g:0.5,b:0.5,a:0},this._maxCardsPerBatch=e.DEFAULT_MAX_BATCH_SIZE,this._activeShader=null,this._vertices=null,this._vertexPositionBuffer=null,this._uvs=null,this._uvPositionBuffer=null,this._indices=null,this._textureIndexBuffer=null,this._alphas=null,this._alphaBuffer=null,this._textureDictionary=[],this._textureIDs={},this._batchTextures=[],this._baseTextures=[],this._batchTextureCount=8,this._lastTextureInsert=-1,this._batchID=0,this._drawID=0,this._slotBlacklist=[],this._isDrawing=0,this._lastTrackedCanvas=0,this.isCacheControlled=!1,this._cacheContainer=new createjs.Container,this._initializeWebGL()}var d=createjs.extend(e,createjs.Stage);e.buildUVRects=function(j,i,p){if(!j||!j._frames){return null}void 0===i&&(i=-1),void 0===p&&(p=!1);for(var o=-1!=i&&p?i:0,n=-1!=i&&p?i+1:j._frames.length,m=o;n>m;m++){var l=j._frames[m];if(!(l.uvRect||l.image.width<=0||l.image.height<=0)){var k=l.rect;l.uvRect={t:k.y/l.image.height,l:k.x/l.image.width,b:(k.y+k.height)/l.image.height,r:(k.x+k.width)/l.image.width}}}return j._frames[-1!=i?i:0].uvRect||{t:0,l:0,b:1,r:1}},e.isWebGLActive=function(b){return b&&b instanceof WebGLRenderingContext&&"undefined"!=typeof WebGLRenderingContext},e.VERTEX_PROPERTY_COUNT=6,e.INDICIES_PER_CARD=6,e.DEFAULT_MAX_BATCH_SIZE=10000,e.WEBGL_MAX_INDEX_NUM=Math.pow(2,16),e.UV_RECT={t:0,l:0,b:1,r:1};try{e.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]),e.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),e.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch(f){}e.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;",e.REGULAR_VERTEX_HEADER=e.REGULAR_VARYING_HEADER+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",e.REGULAR_FRAGMENT_HEADER=e.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",e.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",e.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",e.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",e.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",e.PARTICLE_VERTEX_BODY=e.REGULAR_VERTEX_BODY,e.PARTICLE_FRAGMENT_BODY=e.REGULAR_FRAGMENT_BODY,e.COVER_VARYING_HEADER="precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;",e.COVER_VERTEX_HEADER=e.COVER_VARYING_HEADER+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;",e.COVER_FRAGMENT_HEADER=e.COVER_VARYING_HEADER+"uniform sampler2D uSampler;",e.COVER_VERTEX_BODY="void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}",e.COVER_FRAGMENT_BODY="void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}",d._get_isWebGL=function(){return !!this._webGLContext},d._set_autoPurge=function(b){b=isNaN(b)?1200:b,-1!=b&&(b=10>b?10:b),this._autoPurge=b},d._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(d,{isWebGL:{get:d._get_isWebGL},autoPurge:{get:d._get_autoPurge,set:d._set_autoPurge}})}catch(f){}d._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var g={depth:!1,alpha:this._transparent,stencil:!0,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer},c=this._webGLContext=this._fetchWebGLContext(this.canvas,g);if(!c){return null}this.updateSimultaneousTextureCount(c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)),this._maxTextureSlots=c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._createBuffers(c),this._initTextures(c),c.disable(c.DEPTH_TEST),c.enable(c.BLEND),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply),this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else{this._webGLContext=null}return this._webGLContext},d.update=function(g){if(this.canvas){if(this.tickOnUpdate&&this.tick(g),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext){this._batchDraw(this,this._webGLContext),-1==this._autoPurge||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)}else{var c=this.canvas.getContext("2d");c.save(),this.updateContext(c),this.draw(c,!1),c.restore()}this.dispatchEvent("drawend")}},d.clear=function(){if(this.canvas){if(e.isWebGLActive(this._webGLContext)){var a=this._webGLContext,h=this._clearColor,g=this._transparent?h.a:1;this._webGLContext.clearColor(h.r*g,h.g*g,h.b*g,g),a.clear(a.COLOR_BUFFER_BIT),this._webGLContext.clearColor(h.r,h.g,h.b,h.a)}else{this.Stage_clear()}}},d.draw=function(a,h){if(a===this._webGLContext&&e.isWebGLActive(this._webGLContext)){var g=this._webGLContext;return this._batchDraw(this,g,h),!0}return this.Stage_draw(a,h)},d.cacheDraw=function(a,i,h){if(e.isWebGLActive(this._webGLContext)){var g=this._webGLContext;return this._cacheDraw(g,a,i,h),!0}return !1},d.protectTextureSlot=function(g,c){if(g>this._maxTextureSlots||0>g){throw"Slot outside of acceptable range"}this._slotBlacklist[g]=!!c},d.getTargetRenderTexture=function(h,g,l){var k,j=!1,i=this._webGLContext;if(void 0!==h.__lastRT&&h.__lastRT===h.__rtA&&(j=!0),j?(void 0===h.__rtB?h.__rtB=this.getRenderBufferTexture(g,l):((g!=h.__rtB._width||l!=h.__rtB._height)&&this.resizeTexture(h.__rtB,g,l),this.setTextureParams(i)),k=h.__rtB):(void 0===h.__rtA?h.__rtA=this.getRenderBufferTexture(g,l):((g!=h.__rtA._width||l!=h.__rtA._height)&&this.resizeTexture(h.__rtA,g,l),this.setTextureParams(i)),k=h.__rtA),!k){throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances"}return h.__lastRT=k,k},d.releaseTexture=function(h){var g,j;if(h){if(h.children){for(g=0,j=h.children.length;j>g;g++){this.releaseTexture(h.children[g])}}h.cacheCanvas&&h.uncache();var i=void 0;if(void 0!==h._storeID){if(h===this._textureDictionary[h._storeID]){return this._killTextureObject(h),void (h._storeID=void 0)}i=h}else{if(2===h._webGLRenderStyle){i=h.image}else{if(1===h._webGLRenderStyle){for(g=0,j=h.spriteSheet._images.length;j>g;g++){this.releaseTexture(h.spriteSheet._images[g])}return}}}if(void 0===i){return void (this.vocalDebug&&console.log("No associated texture found on release"))}this._killTextureObject(this._textureDictionary[i._storeID]),i._storeID=void 0}},d.purgeTextures=function(h){void 0==h&&(h=100);for(var g=this._textureDictionary,k=g.length,j=0;k>j;j++){var i=g[j];i&&i._drawID+h<=this._drawID&&this._killTextureObject(i)}},d.updateSimultaneousTextureCount=function(h){var g=this._webGLContext,j=!1;for((1>h||isNaN(h))&&(h=1),this._batchTextureCount=h;!j;){try{this._activeShader=this._fetchShaderProgram(g),j=!0}catch(i){if(1==this._batchTextureCount){throw"Cannot compile shader "+i}this._batchTextureCount-=4,this._batchTextureCount<1&&(this._batchTextureCount=1),this.vocalDebug&&console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}}},d.updateViewport=function(h,g){this._viewportWidth=0|h,this._viewportHeight=0|g;var i=this._webGLContext;i&&(i.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,0.1,0]),this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._projectionMatrixFlip.set(this._projectionMatrix),this._projectionMatrixFlip[5]*=-1,this._projectionMatrixFlip[13]*=-1)},d.getFilterShader=function(h){h||(h=this);var g=this._webGLContext,j=this._activeShader;if(h._builtShader){j=h._builtShader,h.shaderParamSetup&&(g.useProgram(j),h.shaderParamSetup(g,this,j))}else{try{j=this._fetchShaderProgram(g,"filter",h.VTX_SHADER_BODY,h.FRAG_SHADER_BODY,h.shaderParamSetup&&h.shaderParamSetup.bind(h)),h._builtShader=j,j._name=h.toString()}catch(i){console&&console.log("SHADER SWITCH FAILURE",i)}}return j},d.getBaseTexture=function(h,g){var l=Math.ceil(h>0?h:1)||1,k=Math.ceil(g>0?g:1)||1,j=this._webGLContext,i=j.createTexture();return this.resizeTexture(i,l,k),this.setTextureParams(j,!1),i},d.resizeTexture=function(h,g,j){var i=this._webGLContext;i.bindTexture(i.TEXTURE_2D,h),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,g,j,0,i.RGBA,i.UNSIGNED_BYTE,null),h.width=g,h.height=j},d.getRenderBufferTexture=function(h,g){var k=this._webGLContext,j=this.getBaseTexture(h,g);if(!j){return null}var i=k.createFramebuffer();return i?(j.width=h,j.height=g,k.bindFramebuffer(k.FRAMEBUFFER,i),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,j,0),i._renderTexture=j,j._frameBuffer=i,j._storeID=this._textureDictionary.length,this._textureDictionary[j._storeID]=j,k.bindFramebuffer(k.FRAMEBUFFER,null),j):null},d.setTextureParams=function(g,c){c&&this._antialias?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE)},d.setClearColor=function(h){var g,l,k,j,i;"string"==typeof h?0==h.indexOf("#")?(4==h.length&&(h="#"+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)+h.charAt(3)+h.charAt(3)),g=Number("0x"+h.slice(1,3))/255,l=Number("0x"+h.slice(3,5))/255,k=Number("0x"+h.slice(5,7))/255,j=Number("0x"+h.slice(7,9))/255):0==h.indexOf("rgba(")&&(i=h.slice(5,-1).split(","),g=Number(i[0])/255,l=Number(i[1])/255,k=Number(i[2])/255,j=Number(i[3])):(g=((4278190080&h)>>>24)/255,l=((16711680&h)>>>16)/255,k=((65280&h)>>>8)/255,j=(255&h)/255),this._clearColor.r=g||0,this._clearColor.g=l||0,this._clearColor.b=k||0,this._clearColor.a=j||0,this._webGLContext&&this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)},d.toString=function(){return"[StageGL (name="+this.name+")]"},d._fetchWebGLContext=function(h,g){var k;try{k=h.getContext("webgl",g)||h.getContext("experimental-webgl",g)}catch(j){}if(k){k.viewportWidth=h.width,k.viewportHeight=h.height}else{var i="Could not initialize WebGL";console.error?console.error(i):console.log(i)}return k},d._fetchShaderProgram=function(x,w,v,u,t){x.useProgram(null);var s,r;switch(w){case"filter":r=e.COVER_VERTEX_HEADER+(v||e.COVER_VERTEX_BODY),s=e.COVER_FRAGMENT_HEADER+(u||e.COVER_FRAGMENT_BODY);break;case"particle":r=e.REGULAR_VERTEX_HEADER+e.PARTICLE_VERTEX_BODY,s=e.REGULAR_FRAGMENT_HEADER+e.PARTICLE_FRAGMENT_BODY;break;case"override":r=e.REGULAR_VERTEX_HEADER+(v||e.REGULAR_VERTEX_BODY),s=e.REGULAR_FRAGMENT_HEADER+(u||e.REGULAR_FRAGMENT_BODY);break;case"regular":default:r=e.REGULAR_VERTEX_HEADER+e.REGULAR_VERTEX_BODY,s=e.REGULAR_FRAGMENT_HEADER+e.REGULAR_FRAGMENT_BODY}var q=this._createShader(x,x.VERTEX_SHADER,r),p=this._createShader(x,x.FRAGMENT_SHADER,s),o=x.createProgram();if(x.attachShader(o,q),x.attachShader(o,p),x.linkProgram(o),o._type=w,!x.getProgramParameter(o,x.LINK_STATUS)){throw x.useProgram(this._activeShader),x.getProgramInfoLog(o)}switch(x.useProgram(o),w){case"filter":o.vertexPositionAttribute=x.getAttribLocation(o,"vertexPosition"),x.enableVertexAttribArray(o.vertexPositionAttribute),o.uvPositionAttribute=x.getAttribLocation(o,"uvPosition"),x.enableVertexAttribArray(o.uvPositionAttribute),o.samplerUniform=x.getUniformLocation(o,"uSampler"),x.uniform1i(o.samplerUniform,0),o.uprightUniform=x.getUniformLocation(o,"uUpright"),x.uniform1f(o.uprightUniform,0),t&&t(x,this,o);break;case"override":case"particle":case"regular":default:o.vertexPositionAttribute=x.getAttribLocation(o,"vertexPosition"),x.enableVertexAttribArray(o.vertexPositionAttribute),o.uvPositionAttribute=x.getAttribLocation(o,"uvPosition"),x.enableVertexAttribArray(o.uvPositionAttribute),o.textureIndexAttribute=x.getAttribLocation(o,"textureIndex"),x.enableVertexAttribArray(o.textureIndexAttribute),o.alphaAttribute=x.getAttribLocation(o,"objectAlpha"),x.enableVertexAttribArray(o.alphaAttribute);for(var n=[],a=0;a<this._batchTextureCount;a++){n[a]=a}o.samplerData=n,o.samplerUniform=x.getUniformLocation(o,"uSampler"),x.uniform1iv(o.samplerUniform,n),o.pMatrixUniform=x.getUniformLocation(o,"pMatrix")}return x.useProgram(this._activeShader),o},d._createShader=function(a,l,k){k=k.replace(/{{count}}/g,this._batchTextureCount);for(var j="",i=1;i<this._batchTextureCount;i++){j+="} else if (indexPicker <= "+i+".5) { color = texture2D(uSampler["+i+"], vTextureCoord);"}k=k.replace(/{{alternates}}/g,j),k=k.replace(/{{fragColor}}/g,this._premultiply?e.REGULAR_FRAG_COLOR_PREMULTIPLY:e.REGULAR_FRAG_COLOR_NORMAL);var h=a.createShader(l);if(a.shaderSource(h,k),a.compileShader(h),!a.getShaderParameter(h,a.COMPILE_STATUS)){throw a.getShaderInfoLog(h)}return h},d._createBuffers=function(z){var y,x,w,v=this._maxCardsPerBatch*e.INDICIES_PER_CARD,u=this._vertexPositionBuffer=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,u),y=2;var t=this._vertices=new Float32Array(v*y);for(x=0,w=t.length;w>x;x+=y){t[x]=t[x+1]=0}z.bufferData(z.ARRAY_BUFFER,t,z.DYNAMIC_DRAW),u.itemSize=y,u.numItems=v;var s=this._uvPositionBuffer=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,s),y=2;var r=this._uvs=new Float32Array(v*y);for(x=0,w=r.length;w>x;x+=y){r[x]=r[x+1]=0}z.bufferData(z.ARRAY_BUFFER,r,z.DYNAMIC_DRAW),s.itemSize=y,s.numItems=v;var q=this._textureIndexBuffer=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,q),y=1;var p=this._indices=new Float32Array(v*y);for(x=0,w=p.length;w>x;x++){p[x]=0}z.bufferData(z.ARRAY_BUFFER,p,z.DYNAMIC_DRAW),q.itemSize=y,q.numItems=v;var o=this._alphaBuffer=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,o),y=1;var a=this._alphas=new Float32Array(v*y);for(x=0,w=a.length;w>x;x++){a[x]=1}z.bufferData(z.ARRAY_BUFFER,a,z.DYNAMIC_DRAW),o.itemSize=y,o.numItems=v},d._initTextures=function(){this._lastTextureInsert=-1,this._textureDictionary=[],this._textureIDs={},this._baseTextures=[],this._batchTextures=[];for(var g=0;g<this._batchTextureCount;g++){var c=this.getBaseTexture();if(this._baseTextures[g]=this._batchTextures[g]=c,!c){throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}}},d._loadTextureImage=function(h,g){var l=g.src;l||(g._isCanvas=!0,l=g.src="canvas_"+this._lastTrackedCanvas++);var k=this._textureIDs[l];void 0===k&&(k=this._textureIDs[l]=this._textureDictionary.length),void 0===this._textureDictionary[k]&&(this._textureDictionary[k]=this.getBaseTexture());var j=this._textureDictionary[k];if(j){j._batchID=this._batchID,j._storeID=k,j._imageData=g,this._insertTextureInBatch(h,j),g._storeID=k,g.complete||g.naturalWidth||g._isCanvas?this._updateTextureImageData(h,g):g.addEventListener("load",this._updateTextureImageData.bind(this,h,g))}else{var i="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances";console.error&&console.error(i)||console.log(i),j=this._baseTextures[0],j._batchID=this._batchID,j._storeID=-1,j._imageData=j,this._insertTextureInBatch(h,j)}return j},d._updateTextureImageData=function(h,g){var l=g.width&g.width-1||g.height&g.height-1,k=this._textureDictionary[g._storeID];h.activeTexture(h.TEXTURE0+k._activeIndex),h.bindTexture(h.TEXTURE_2D,k),k.isPOT=!l,this.setTextureParams(h,k.isPOT);try{h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,g)}catch(j){var i="\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins";console.error?(console.error(i),console.error(j)):console&&(console.log(i),console.log(j))}g._invalid=!1,k._w=g.width,k._h=g.height,this.vocalDebug&&(l&&console.warn("NPOT(Non Power of Two) Texture: "+g.src),(g.width>h.MAX_TEXTURE_SIZE||g.height>h.MAX_TEXTURE_SIZE)&&console&&console.error("Oversized Texture: "+g.width+"x"+g.height+" vs "+h.MAX_TEXTURE_SIZE+"max"))},d._insertTextureInBatch=function(h,g){if(this._batchTextures[g._activeIndex]!==g){var l=-1,k=(this._lastTextureInsert+1)%this._batchTextureCount,j=k;do{if(this._batchTextures[j]._batchID!=this._batchID&&!this._slotBlacklist[j]){l=j;break}j=(j+1)%this._batchTextureCount}while(j!==k);-1===l&&(this.batchReason="textureOverflow",this._drawBuffers(h),this.batchCardCount=0,l=k),this._batchTextures[l]=g,g._activeIndex=l;var i=g._imageData;i&&i._invalid&&void 0!==g._drawID?this._updateTextureImageData(h,i):(h.activeTexture(h.TEXTURE0+l),h.bindTexture(h.TEXTURE_2D,g),this.setTextureParams(h)),this._lastTextureInsert=l}else{var i=g._imageData;void 0!=g._storeID&&i&&i._invalid&&this._updateTextureImageData(h,i)}g._drawID=this._drawID,g._batchID=this._batchID},d._killTextureObject=function(h){if(h){var g=this._webGLContext;if(void 0!==h._storeID&&h._storeID>=0){this._textureDictionary[h._storeID]=void 0;for(var j in this._textureIDs){this._textureIDs[j]==h._storeID&&delete this._textureIDs[j]}h._imageData&&(h._imageData._storeID=void 0),h._imageData=h._storeID=void 0}void 0!==h._activeIndex&&this._batchTextures[h._activeIndex]===h&&(this._batchTextures[h._activeIndex]=this._baseTextures[h._activeIndex]);try{h._frameBuffer&&g.deleteFramebuffer(h._frameBuffer),h._frameBuffer=void 0}catch(i){this.vocalDebug&&console.log(i)}try{g.deleteTexture(h)}catch(i){this.vocalDebug&&console.log(i)}}},d._backupBatchTextures=function(h,g){var j=this._webGLContext;this._backupTextures||(this._backupTextures=[]),void 0===g&&(g=this._backupTextures);for(var i=0;i<this._batchTextureCount;i++){j.activeTexture(j.TEXTURE0+i),h?this._batchTextures[i]=g[i]:(g[i]=this._batchTextures[i],this._batchTextures[i]=this._baseTextures[i]),j.bindTexture(j.TEXTURE_2D,this._batchTextures[i]),this.setTextureParams(j,this._batchTextures[i].isPOT)}h&&g===this._backupTextures&&(this._backupTextures=[])},d._batchDraw=function(h,g,i){this._isDrawing>0&&this._drawBuffers(g),this._isDrawing++,this._drawID++,this.batchCardCount=0,this.depth=0,this._appendToBatchGroup(h,g,new createjs.Matrix2D,this.alpha,i),this.batchReason="drawFinish",this._drawBuffers(g),this._isDrawing--},d._cacheDraw=function(x,w,v,u){var t,s=this._activeShader,r=this._slotBlacklist,q=this._maxTextureSlots-1,p=this._viewportWidth,o=this._viewportHeight;this.protectTextureSlot(q,!0);var n=w.getMatrix();n=n.clone(),n.scale(1/u.scale,1/u.scale),n=n.invert(),n.translate(-u.offX/u.scale*w.scaleX,-u.offY/u.scale*w.scaleY);var m=this._cacheContainer;m.children=[w],m.transformMatrix=n,this._backupBatchTextures(!1),v&&v.length?this._drawFilters(w,v,u):this.isCacheControlled?(x.clear(x.COLOR_BUFFER_BIT),this._batchDraw(m,x,!0)):(x.activeTexture(x.TEXTURE0+q),w.cacheCanvas=this.getTargetRenderTexture(w,u._drawWidth,u._drawHeight),t=w.cacheCanvas,x.bindFramebuffer(x.FRAMEBUFFER,t._frameBuffer),this.updateViewport(u._drawWidth,u._drawHeight),this._projectionMatrix=this._projectionMatrixFlip,x.clear(x.COLOR_BUFFER_BIT),this._batchDraw(m,x,!0),x.bindFramebuffer(x.FRAMEBUFFER,null),this.updateViewport(p,o)),this._backupBatchTextures(!0),this.protectTextureSlot(q,!1),this._activeShader=s,this._slotBlacklist=r},d._drawFilters=function(z,y,x){var w,v=this._webGLContext,u=this._maxTextureSlots-1,t=this._viewportWidth,s=this._viewportHeight,r=this._cacheContainer,q=y.length;v.activeTexture(v.TEXTURE0+u),w=this.getTargetRenderTexture(z,x._drawWidth,x._drawHeight),v.bindFramebuffer(v.FRAMEBUFFER,w._frameBuffer),this.updateViewport(x._drawWidth,x._drawHeight),v.clear(v.COLOR_BUFFER_BIT),this._batchDraw(r,v,!0),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,w),this.setTextureParams(v);var p=!1,o=0,n=y[o];do{this._activeShader=this.getFilterShader(n),this._activeShader&&(v.activeTexture(v.TEXTURE0+u),w=this.getTargetRenderTexture(z,x._drawWidth,x._drawHeight),v.bindFramebuffer(v.FRAMEBUFFER,w._frameBuffer),v.viewport(0,0,x._drawWidth,x._drawHeight),v.clear(v.COLOR_BUFFER_BIT),this._drawCover(v,p),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,w),this.setTextureParams(v),(q>1||y[0]._multiPass)&&(p=!p),n=null!==n._multiPass?n._multiPass:y[++o])}while(n);this.isCacheControlled?(v.bindFramebuffer(v.FRAMEBUFFER,null),this.updateViewport(t,s),this._activeShader=this.getFilterShader(this),v.clear(v.COLOR_BUFFER_BIT),this._drawCover(v,p)):(p&&(v.activeTexture(v.TEXTURE0+u),w=this.getTargetRenderTexture(z,x._drawWidth,x._drawHeight),v.bindFramebuffer(v.FRAMEBUFFER,w._frameBuffer),this._activeShader=this.getFilterShader(this),v.viewport(0,0,x._drawWidth,x._drawHeight),v.clear(v.COLOR_BUFFER_BIT),this._drawCover(v,!p)),v.bindFramebuffer(v.FRAMEBUFFER,null),this.updateViewport(t,s),z.cacheCanvas=w)},d._appendToBatchGroup=function(ad,ac,ab,aa,Z){ad._glMtx||(ad._glMtx=new createjs.Matrix2D);var Y=ad._glMtx;Y.copy(ab),ad.transformMatrix?Y.appendMatrix(ad.transformMatrix):Y.appendTransform(ad.x,ad.y,ad.scaleX,ad.scaleY,ad.rotation,ad.skewX,ad.skewY,ad.regX,ad.regY);for(var X,W,V,U,T=ad.children.length,S=0;T>S;S++){var R=ad.children[S];if(R.visible&&aa){if(R.cacheCanvas&&!Z||(R._updateState&&R._updateState(),!R.children)){this.batchCardCount+1>this._maxCardsPerBatch&&(this.batchReason="vertexOverflow",this._drawBuffers(ac),this.batchCardCount=0),R._glMtx||(R._glMtx=new createjs.Matrix2D);var Q=R._glMtx;Q.copy(Y),R.transformMatrix?Q.appendMatrix(R.transformMatrix):Q.appendTransform(R.x,R.y,R.scaleX,R.scaleY,R.rotation,R.skewX,R.skewY,R.regX,R.regY);var P,N,L,J,I,H,G=R.cacheCanvas&&!Z;if(2===R._webGLRenderStyle||G){L=(Z?!1:R.cacheCanvas)||R.image}else{if(1!==R._webGLRenderStyle){continue}if(J=R.spriteSheet.getFrame(R.currentFrame),null===J){continue}L=J.image}var F=this._uvs,E=this._vertices,D=this._indices,a=this._alphas;if(L){if(void 0===L._storeID){I=this._loadTextureImage(ac,L),this._insertTextureInBatch(ac,I)}else{if(I=this._textureDictionary[L._storeID],!I){this.vocalDebug&&console.log("Texture should not be looked up while not being stored.");continue}I._batchID!==this._batchID&&this._insertTextureInBatch(ac,I)}if(N=I._activeIndex,2===R._webGLRenderStyle||G){!G&&R.sourceRect?(R._uvRect||(R._uvRect={}),H=R.sourceRect,P=R._uvRect,P.t=H.y/L.height,P.l=H.x/L.width,P.b=(H.y+H.height)/L.height,P.r=(H.x+H.width)/L.width,X=0,W=0,V=H.width+X,U=H.height+W):(P=e.UV_RECT,G?(H=R.bitmapCache,X=H.x+H._filterOffX/H.scale,W=H.y+H._filterOffY/H.scale,V=H._drawWidth/H.scale+X,U=H._drawHeight/H.scale+W):(X=0,W=0,V=L.width+X,U=L.height+W))}else{if(1===R._webGLRenderStyle){var O=J.rect;P=J.uvRect,P||(P=e.buildUVRects(R.spriteSheet,R.currentFrame,!1)),X=-J.regX,W=-J.regY,V=O.width-J.regX,U=O.height-J.regY}}var M=this.batchCardCount*e.INDICIES_PER_CARD,K=2*M;E[K]=X*Q.a+W*Q.c+Q.tx,E[K+1]=X*Q.b+W*Q.d+Q.ty,E[K+2]=X*Q.a+U*Q.c+Q.tx,E[K+3]=X*Q.b+U*Q.d+Q.ty,E[K+4]=V*Q.a+W*Q.c+Q.tx,E[K+5]=V*Q.b+W*Q.d+Q.ty,E[K+6]=E[K+2],E[K+7]=E[K+3],E[K+8]=E[K+4],E[K+9]=E[K+5],E[K+10]=V*Q.a+U*Q.c+Q.tx,E[K+11]=V*Q.b+U*Q.d+Q.ty,F[K]=P.l,F[K+1]=P.t,F[K+2]=P.l,F[K+3]=P.b,F[K+4]=P.r,F[K+5]=P.t,F[K+6]=P.l,F[K+7]=P.b,F[K+8]=P.r,F[K+9]=P.t,F[K+10]=P.r,F[K+11]=P.b,D[M]=D[M+1]=D[M+2]=D[M+3]=D[M+4]=D[M+5]=N,a[M]=a[M+1]=a[M+2]=a[M+3]=a[M+4]=a[M+5]=R.alpha*aa,this.batchCardCount++}}else{this._appendToBatchGroup(R,ac,Y,R.alpha*aa)}}}},d._drawBuffers=function(a){if(!(this.batchCardCount<=0)){this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason);var p=this._activeShader,o=this._vertexPositionBuffer,n=this._textureIndexBuffer,m=this._uvPositionBuffer,l=this._alphaBuffer;a.useProgram(p),a.bindBuffer(a.ARRAY_BUFFER,o),a.vertexAttribPointer(p.vertexPositionAttribute,o.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._vertices),a.bindBuffer(a.ARRAY_BUFFER,n),a.vertexAttribPointer(p.textureIndexAttribute,n.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._indices),a.bindBuffer(a.ARRAY_BUFFER,m),a.vertexAttribPointer(p.uvPositionAttribute,m.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._uvs),a.bindBuffer(a.ARRAY_BUFFER,l),a.vertexAttribPointer(p.alphaAttribute,l.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._alphas),a.uniformMatrix4fv(p.pMatrixUniform,a.FALSE,this._projectionMatrix);for(var k=0;k<this._batchTextureCount;k++){var j=this._batchTextures[k];a.activeTexture(a.TEXTURE0+k),a.bindTexture(a.TEXTURE_2D,j),this.setTextureParams(a,j.isPOT)}a.drawArrays(a.TRIANGLES,0,this.batchCardCount*e.INDICIES_PER_CARD),this._batchID++}},d._drawCover=function(a,j){this._isDrawing>0&&this._drawBuffers(a),this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover");var i=this._activeShader,h=this._vertexPositionBuffer,g=this._uvPositionBuffer;a.clear(a.COLOR_BUFFER_BIT),a.useProgram(i),a.bindBuffer(a.ARRAY_BUFFER,h),a.vertexAttribPointer(i.vertexPositionAttribute,h.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,e.COVER_VERT),a.bindBuffer(a.ARRAY_BUFFER,g),a.vertexAttribPointer(i.uvPositionAttribute,g.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,j?e.COVER_UV_FLIP:e.COVER_UV),a.uniform1i(i.samplerUniform,0),a.uniform1f(i.uprightUniform,j?0:1),a.drawArrays(a.TRIANGLES,0,e.INDICIES_PER_CARD)},createjs.StageGL=createjs.promote(e,"Stage")}(),this.createjs=this.createjs||{},function(){function d(b){this.DisplayObject_constructor(),"string"==typeof b?(this.image=document.createElement("img"),this.image.src=b):this.image=b,this.sourceRect=null,this._webGLRenderStyle=createjs.DisplayObject._StageGL_BITMAP}var c=createjs.extend(d,createjs.DisplayObject);c.initialize=d,c.isVisible=function(){var f=this.image,e=this.cacheCanvas||f&&(f.naturalWidth||f.getContext||f.readyState>=2);return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},c.draw=function(x,w){if(this.DisplayObject_draw(x,w)){return !0}var v=this.image,u=this.sourceRect;if(v.getImage&&(v=v.getImage()),!v){return !0}if(u){var t=u.x,s=u.y,r=t+u.width,q=s+u.height,p=0,o=0,n=v.width,m=v.height;0>t&&(p-=t,t=0),r>n&&(r=n),0>s&&(o-=s,s=0),q>m&&(q=m),x.drawImage(v,t,s,r-t,q-s,p,o,r-t,q-s)}else{x.drawImage(v,0,0)}return !0},c.getBounds=function(){var f=this.DisplayObject_getBounds();if(f){return f}var e=this.image,h=this.sourceRect||e,g=e&&(e.naturalWidth||e.getContext||e.readyState>=2);return g?this._rectangle.setValues(0,0,h.width,h.height):null},c.clone=function(a){var f=this.image;f&&a&&(f=f.cloneNode());var e=new d(f);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},c.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(d,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function d(f,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=f,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=createjs.DisplayObject._StageGL_SPRITE,null!=e&&this.gotoAndPlay(e)}var c=createjs.extend(d,createjs.DisplayObject);c.initialize=d,c.isVisible=function(){var b=this.cacheCanvas||this.spriteSheet.complete;return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(f,e){if(this.DisplayObject_draw(f,e)){return !0}this._normalizeFrame();var h=this.spriteSheet.getFrame(0|this._currentFrame);if(!h){return !1}var g=h.rect;return g.width&&g.height&&f.drawImage(h.image,g.x,g.y,g.width,g.height,-h.regX,-h.regY,g.width,g.height),!0},c.play=function(){this.paused=!1},c.stop=function(){this.paused=!0},c.gotoAndPlay=function(b){this.paused=!1,this._skipAdvance=!0,this._goto(b)},c.gotoAndStop=function(b){this.paused=!0,this._goto(b)},c.advance=function(f){var e=this.framerate||this.spriteSheet.framerate,g=e&&null!=f?f/(1000/e):1;this._normalizeFrame(g)},c.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},c.clone=function(){return this._cloneProps(new d(this.spriteSheet))},c.toString=function(){return"[Sprite (name="+this.name+")]"},c._cloneProps=function(b){return this.DisplayObject__cloneProps(b),b.currentFrame=this.currentFrame,b.currentAnimation=this.currentAnimation,b.paused=this.paused,b.currentAnimationFrame=this.currentAnimationFrame,b.framerate=this.framerate,b._animation=this._animation,b._currentFrame=this._currentFrame,b._skipAdvance=this._skipAdvance,b},c._tick=function(b){this.paused||(this._skipAdvance||this.advance(b&&b.delta),this._skipAdvance=!1),this.DisplayObject__tick(b)},c._normalizeFrame=function(j){j=j||0;var i,p=this._animation,o=this.paused,n=this._currentFrame;if(p){var m=p.speed||1,l=this.currentAnimationFrame;if(i=p.frames.length,l+j*m>=i){var k=p.next;if(this._dispatchAnimationEnd(p,n,o,k,i-1)){return}if(k){return this._goto(k,j-(i-l)/m)}this.paused=!0,l=p.frames.length-1}else{l+=j*m}this.currentAnimationFrame=l,this._currentFrame=p.frames[0|l]}else{if(n=this._currentFrame+=j,i=this.spriteSheet.getNumFrames(),n>=i&&i>0&&!this._dispatchAnimationEnd(p,n,o,i-1)&&(this._currentFrame-=i)>=i){return this._normalizeFrame()}}n=0|this._currentFrame,this.currentFrame!=n&&(this.currentFrame=n,this.dispatchEvent("change"))},c._dispatchAnimationEnd=function(j,i,p,o,n){var m=j?j.name:null;if(this.hasEventListener("animationend")){var l=new createjs.Event("animationend");l.name=m,l.next=o,this.dispatchEvent(l)}var k=this._animation!=j||this._currentFrame!=i;return k||p||!this.paused||(this.currentAnimationFrame=n,k=!0),k},c._goto=function(f,e){if(this.currentAnimationFrame=0,isNaN(f)){var g=this.spriteSheet.getAnimation(f);g&&(this._animation=g,this.currentAnimation=f,this._normalizeFrame(e))}else{this.currentAnimation=this._animation=null,this._currentFrame=f,this._normalizeFrame()}},createjs.Sprite=createjs.promote(d,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function d(b){this.DisplayObject_constructor(),this.graphics=b?b:new createjs.Graphics}var c=createjs.extend(d,createjs.DisplayObject);c.isVisible=function(){var b=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(f,e){return this.DisplayObject_draw(f,e)?!0:(this.graphics.draw(f,this),!0)},c.clone=function(a){var e=a&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new d(e))},c.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(d,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function e(h,g,i){this.DisplayObject_constructor(),this.text=h,this.font=g,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var d=createjs.extend(e,createjs.DisplayObject),f=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");f.getContext&&(e._workingContext=f.getContext("2d"),f.width=f.height=1),e.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1},d.isVisible=function(){var b=this.cacheCanvas||null!=this.text&&""!==this.text;return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},d.draw=function(h,g){if(this.DisplayObject_draw(h,g)){return !0}var i=this.color||"#000";return this.outline?(h.strokeStyle=i,h.lineWidth=1*this.outline):h.fillStyle=i,this._drawText(this._prepContext(h)),!0},d.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},d.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},d.getMeasuredHeight=function(){return this._drawText(null,{}).height},d.getBounds=function(){var a=this.DisplayObject_getBounds();if(a){return a}if(null==this.text||""===this.text){return null}var l=this._drawText(null,{}),k=this.maxWidth&&this.maxWidth<l.width?this.maxWidth:l.width,j=k*e.H_OFFSETS[this.textAlign||"left"],i=this.lineHeight||this.getMeasuredLineHeight(),h=i*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(j,h,k,l.height)},d.getMetrics=function(){var a={lines:[]};return a.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),a.vOffset=a.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,a,a.lines)},d.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},d.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},d._cloneProps=function(b){return this.DisplayObject__cloneProps(b),b.textAlign=this.textAlign,b.textBaseline=this.textBaseline,b.maxWidth=this.maxWidth,b.outline=this.outline,b.lineHeight=this.lineHeight,b.lineWidth=this.lineWidth,b},d._prepContext=function(b){return b.font=this.font||"10px sans-serif",b.textAlign=this.textAlign||"left",b.textBaseline=this.textBaseline||"top",b.lineJoin="miter",b.miterLimit=2.5,b},d._drawText=function(F,E,D){var C=!!F;C||(F=e._workingContext,F.save(),this._prepContext(F));for(var B=this.lineHeight||this.getMeasuredLineHeight(),A=0,z=0,y=String(this.text).split(/(?:\r\n|\r|\n)/),x=0,w=y.length;w>x;x++){var v=y[x],u=null;if(null!=this.lineWidth&&(u=F.measureText(v).width)>this.lineWidth){var t=v.split(/(\s)/);v=t[0],u=F.measureText(v).width;for(var s=1,r=t.length;r>s;s+=2){var a=F.measureText(t[s]+t[s+1]).width;u+a>this.lineWidth?(C&&this._drawTextLine(F,v,z*B),D&&D.push(v),u>A&&(A=u),v=t[s+1],u=F.measureText(v).width,z++):(v+=t[s]+t[s+1],u+=a)}}C&&this._drawTextLine(F,v,z*B),D&&D.push(v),E&&null==u&&(u=F.measureText(v).width),u>A&&(A=u),z++}return E&&(E.width=A,E.height=z*B),C||F.restore(),E},d._drawTextLine=function(h,g,i){this.outline?h.strokeText(g,0,i,this.maxWidth||65535):h.fillText(g,0,i,this.maxWidth||65535)},d._getMeasuredWidth=function(a){var h=e._workingContext;h.save();var g=this._prepContext(h).measureText(a).width;return h.restore(),g},createjs.Text=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function d(f,e){this.Container_constructor(),this.text=f||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}var c=createjs.extend(d,createjs.Container);d.maxPoolSize=100,d._spritePool=[],c.draw=function(f,e){this.DisplayObject_draw(f,e)||(this._updateState(),this.Container_draw(f,e))},c.getBounds=function(){return this._updateText(),this.Container_getBounds()},c.isVisible=function(){var b=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return !!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&b)},c.clone=function(){return this._cloneProps(new d(this.text,this.spriteSheet))},c.addChild=c.addChildAt=c.removeChild=c.removeChildAt=c.removeAllChildren=function(){},c._updateState=function(){this._updateText()},c._cloneProps=function(b){return this.Container__cloneProps(b),b.lineHeight=this.lineHeight,b.letterSpacing=this.letterSpacing,b.spaceWidth=this.spaceWidth,b},c._getFrameIndex=function(f,e){var h,g=e.getAnimation(f);return g||(f!=(h=f.toUpperCase())||f!=(h=f.toLowerCase())||(h=null),h&&(g=e.getAnimation(h))),g&&g.frames[0]},c._getFrame=function(f,e){var g=this._getFrameIndex(f,e);return null==g?g:e.getFrame(g)},c._getLineHeight=function(f){var e=this._getFrame("1",f)||this._getFrame("T",f)||this._getFrame("L",f)||f.getFrame(0);return e?e.rect.height:1},c._getSpaceWidth=function(f){var e=this._getFrame("1",f)||this._getFrame("l",f)||this._getFrame("e",f)||this._getFrame("a",f)||f.getFrame(0);return e?e.rect.width:1},c._updateText=function(){var J,I=0,H=0,G=this._oldProps,F=!1,E=this.spaceWidth,D=this.lineHeight,C=this.spriteSheet,B=d._spritePool,A=this.children,z=0,y=A.length;for(var x in G){G[x]!=this[x]&&(G[x]=this[x],F=!0)}if(F){var w=!!this._getFrame(" ",C);w||E||(E=this._getSpaceWidth(C)),D||(D=this._getLineHeight(C));for(var v=0,u=this.text.length;u>v;v++){var t=this.text.charAt(v);if(" "!=t||w){if("\n"!=t&&"\r"!=t){var a=this._getFrameIndex(t,C);null!=a&&(y>z?J=A[z]:(A.push(J=B.length?B.pop():new createjs.Sprite),J.parent=this,y++),J.spriteSheet=C,J.gotoAndStop(a),J.x=I,J.y=H,z++,I+=J.getBounds().width+this.letterSpacing)}else{"\r"==t&&"\n"==this.text.charAt(v+1)&&v++,I=0,H+=D}}else{I+=E}}for(;y>z;){B.push(J=A.pop()),J.parent=null,y--}B.length>d.maxPoolSize&&(B.length=d.maxPoolSize)}},createjs.BitmapText=createjs.promote(d,"Container")}(),this.createjs=this.createjs||{},function(){function f(a){this.Container_constructor(),!f.inited&&f.init();var l,k,j,i;a instanceof String||arguments.length>1?(l=a,k=arguments[1],j=arguments[2],i=arguments[3],null==j&&(j=-1),a=null):a&&(l=a.mode,k=a.startPosition,j=a.loop,i=a.labels),a||(a={labels:i}),this.mode=l||f.INDEPENDENT,this.startPosition=k||0,this.loop=j===!0?-1:j||0,this.currentFrame=0,this.paused=a.paused||!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||a.frameBounds,this.framerate=null,a.useTicks=a.paused=!0,this.timeline=new createjs.Timeline(a),this._synchOffset=0,this._rawPosition=-1,this._bound_resolveState=this._resolveState.bind(this),this._t=0,this._managed={}}function e(){throw"MovieClipPlugin cannot be instantiated."}var h=createjs.extend(f,createjs.Container);f.INDEPENDENT="independent",f.SINGLE_FRAME="single",f.SYNCHED="synched",f.inited=!1,f.init=function(){f.inited||(e.install(),f.inited=!0)},h._getLabels=function(){return this.timeline.getLabels()},h.getLabels=createjs.deprecate(h._getLabels,"MovieClip.getLabels"),h._getCurrentLabel=function(){return this.timeline.currentLabel},h.getCurrentLabel=createjs.deprecate(h._getCurrentLabel,"MovieClip.getCurrentLabel"),h._getDuration=function(){return this.timeline.duration},h.getDuration=createjs.deprecate(h._getDuration,"MovieClip.getDuration");try{Object.defineProperties(h,{labels:{get:h._getLabels},currentLabel:{get:h._getCurrentLabel},totalFrames:{get:h._getDuration},duration:{get:h._getDuration}})}catch(g){}h.initialize=f,h.isVisible=function(){return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},h.draw=function(d,c){return this.DisplayObject_draw(d,c)?!0:(this._updateState(),this.Container_draw(d,c),!0)},h.play=function(){this.paused=!1},h.stop=function(){this.paused=!0},h.gotoAndPlay=function(b){this.paused=!1,this._goto(b)},h.gotoAndStop=function(b){this.paused=!0,this._goto(b)},h.advance=function(a){var m=f.INDEPENDENT;if(this.mode===m){for(var l=this,k=l.framerate;(l=l.parent)&&null===k;){l.mode===m&&(k=l._framerate)}if(this._framerate=k,!this.paused){var j=null!==k&&-1!==k&&null!==a?a/(1000/k)+this._t:1,i=0|j;for(this._t=j-i;i--;){this._updateTimeline(this._rawPosition+1,!1)}}}},h.clone=function(){throw"MovieClip cannot be cloned."},h.toString=function(){return"[MovieClip (name="+this.name+")]"},h._updateState=function(){(-1===this._rawPosition||this.mode!==f.INDEPENDENT)&&this._updateTimeline(-1)},h._tick=function(b){this.advance(b&&b.delta),this.Container__tick(b)},h._goto=function(d){var c=this.timeline.resolve(d);null!=c&&(this._t=0,this._updateTimeline(c,!0))},h._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},h._updateTimeline=function(a,k){var j=this.mode!==f.INDEPENDENT,i=this.timeline;j&&(a=this.startPosition+(this.mode===f.SINGLE_FRAME?0:this._synchOffset)),0>a&&(a=0),(this._rawPosition!==a||j)&&(this._rawPosition=a,i.loop=this.loop,i.setPosition(a,j||!this.actionsEnabled,k,this._bound_resolveState))},h._renderFirstFrame=function(){var d=this.timeline,c=d.rawPosition;d.setPosition(0,!0,!0,this._bound_resolveState),d.rawPosition=c},h._resolveState=function(){var t=this.timeline;this.currentFrame=t.position;for(var s in this._managed){this._managed[s]=1}for(var r=t.tweens,q=0,p=r.length;p>q;q++){var o=r[q],n=o.target;if(n!==this&&!o.passive){var m=o._stepPosition;n instanceof createjs.DisplayObject?this._addManagedChild(n,m):this._setState(n.state,m)}}var l=this.children;for(q=l.length-1;q>=0;q--){var k=l[q].id;1===this._managed[k]&&(this.removeChildAt(q),delete this._managed[k])}},h._setState=function(j,i){if(j){for(var o=j.length-1;o>=0;o--){var n=j[o],m=n.t,l=n.p;for(var k in l){m[k]=l[k]}this._addManagedChild(m,i)}}},h._addManagedChild=function(a,d){a._off||(this.addChildAt(a,0),a instanceof f&&(a._synchOffset=d,a.mode===f.INDEPENDENT&&a.autoReset&&!this._managed[a.id]&&a._reset()),this._managed[a.id]=2)},h._getBounds=function(i,d){var j=this.DisplayObject_getBounds();return j||this.frameBounds&&(j=this._rectangle.copy(this.frameBounds[this.currentFrame])),j?this._transformBounds(j,i,d):this.Container__getBounds(i,d)},createjs.MovieClip=createjs.promote(f,"Container"),e.priority=100,e.ID="MovieClip",e.install=function(){createjs.Tween._installPlugin(e)},e.init=function(b,a){"startPosition"===a&&b.target instanceof f&&b._addPlugin(e)},e.step=function(){},e.change=function(j,i,m,l,k){return"startPosition"===m?1===k?i.props[m]:i.prev.props[m]:void 0}}(),this.createjs=this.createjs||{},function(){function d(){throw"SpriteSheetUtils cannot be instantiated"}var c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");c.getContext&&(d._workingCanvas=c,d._workingContext=c.getContext("2d"),c.width=c.height=1),d.extractFrame=function(a,l){isNaN(l)&&(l=a.getAnimation(l).frames[0]);var k=a.getFrame(l);if(!k){return null}var j=k.rect,i=d._workingCanvas;i.width=j.width,i.height=j.height,d._workingContext.drawImage(k.image,j.x,j.y,j.width,j.height,0,0,j.width,j.height);var h=document.createElement("img");return h.src=i.toDataURL("image/png"),h},d.addFlippedFrames=createjs.deprecate(null,"SpriteSheetUtils.addFlippedFrames"),d.mergeAlpha=createjs.deprecate(null,"SpriteSheetUtils.mergeAlpha"),d._flip=function(T,S,R,Q){for(var P=T._images,O=d._workingCanvas,N=d._workingContext,M=P.length/S,L=0;M>L;L++){var K=P[L];K.__tmp=L,N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,O.width+1,O.height+1),O.width=K.width,O.height=K.height,N.setTransform(R?-1:1,0,0,Q?-1:1,R?K.width:0,Q?K.height:0),N.drawImage(K,0,0);var J=document.createElement("img");J.src=O.toDataURL("image/png"),J.width=K.width||K.naturalWidth,J.height=K.height||K.naturalHeight,P.push(J)}var I=T._frames,H=I.length/S;for(L=0;H>L;L++){K=I[L];var G=K.rect.clone();J=P[K.image.__tmp+M*S];var F={image:J,rect:G,regX:K.regX,regY:K.regY};R&&(G.x=(J.width||J.naturalWidth)-G.x-G.width,F.regX=G.width-K.regX),Q&&(G.y=(J.height||J.naturalHeight)-G.y-G.height,F.regY=G.height-K.regY),I.push(F)}var E="_"+(R?"h":"")+(Q?"v":""),D=T._animations,C=T._data,B=D.length/S;for(L=0;B>L;L++){var A=D[L];K=C[A];var z={name:A+E,speed:K.speed,next:K.next,frames:[]};K.next&&(z.next+=E),I=K.frames;for(var y=0,a=I.length;a>y;y++){z.frames.push(I[y]+H*S)}C[z.name]=z,D.push(z.name)}},createjs.SpriteSheetUtils=d}(),this.createjs=this.createjs||{},function(){function d(b){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=0.3,this.progress=-1,this.framerate=b||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var c=createjs.extend(d,createjs.EventDispatcher);d.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",d.ERR_RUNNING="a build is already running",c.addFrame=function(a,l,k,j,i){if(this._data){throw d.ERR_RUNNING}var h=l||a.bounds||a.nominalBounds;return !h&&a.getBounds&&(h=a.getBounds()),h?(k=k||1,this._frames.push({source:a,sourceRect:h,scale:k,funct:j,data:i,index:this._frames.length,height:h.height*k})-1):null},c.addAnimation=function(a,h,g,f){if(this._data){throw d.ERR_RUNNING}this._animations[a]={frames:h,next:g,speed:f}},c.addMovieClip=function(P,O,N,M,L,K){if(this._data){throw d.ERR_RUNNING}var J=P.frameBounds,I=O||P.bounds||P.nominalBounds;if(!I&&P.getBounds&&(I=P.getBounds()),I||J){var H,G,F=this._frames.length,E=P.timeline.duration;for(H=0;E>H;H++){var D=J&&J[H]?J[H]:I;this.addFrame(P,D,N,this._setupMovieClipFrame,{i:H,f:M,d:L})}var C=P.timeline._labels,B=[];for(var A in C){B.push({index:C[A],label:A})}if(B.length){for(B.sort(function(f,e){return f.index-e.index}),H=0,G=B.length;G>H;H++){for(var z=B[H].label,y=F+B[H].index,x=F+(H==G-1?E:B[H+1].index),w=[],a=y;x>a;a++){w.push(a)}(!K||(z=K(z,P,y,x)))&&this.addAnimation(z,w,!0)}}}},c.build=function(){if(this._data){throw d.ERR_RUNNING}for(this._startBuild();this._drawNext();){}return this._endBuild(),this.spriteSheet},c.buildAsync=function(a){if(this._data){throw d.ERR_RUNNING}this.timeSlice=a,this._startBuild();var e=this;this._timerID=setTimeout(function(){e._run()},50-50*Math.max(0.01,Math.min(0.99,this.timeSlice||0.3)))},c.stopAsync=function(){clearTimeout(this._timerID),this._data=null},c.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},c.toString=function(){return"[SpriteSheetBuilder]"},c._startBuild=function(){var a=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var p=[];this._data={images:[],frames:p,framerate:this.framerate,animations:this._animations};var o=this._frames.slice();if(o.sort(function(f,e){return f.height<=e.height?-1:1}),o[o.length-1].height+2*a>this.maxHeight){throw d.ERR_DIMENSIONS}for(var n=0,m=0,l=0;o.length;){var k=this._fillRow(o,n,l,p,a);if(k.w>m&&(m=k.w),n+=k.h,!k.h||!o.length){var j=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");j.width=this._getSize(m,this.maxWidth),j.height=this._getSize(n,this.maxHeight),this._data.images[l]=j,k.h||(m=n=0,l++)}}},c._setupMovieClipFrame=function(f,e){var g=f.actionsEnabled;f.actionsEnabled=!1,f.gotoAndStop(e.i),f.actionsEnabled=g,e.f&&e.f(f,e.d,e.i)},c._getSize=function(f,e){for(var g=4;Math.pow(2,++g)<f;){}return Math.min(e,Math.pow(2,g))},c._fillRow=function(L,K,J,I,H){var G=this.maxWidth,F=this.maxHeight;K+=H;for(var E=F-K,D=H,C=0,B=L.length-1;B>=0;B--){var A=L[B],z=this._scale*A.scale,y=A.sourceRect,x=A.source,w=Math.floor(z*y.x-H),v=Math.floor(z*y.y-H),u=Math.ceil(z*y.height+2*H),a=Math.ceil(z*y.width+2*H);if(a>G){throw d.ERR_DIMENSIONS}u>E||D+a>G||(A.img=J,A.rect=new createjs.Rectangle(D,K,a,u),C=C||u,L.splice(B,1),I[A.index]=[D,K,a,u,J,Math.round(-w+z*x.regX-H),Math.round(-v+z*x.regY-H)],D+=a)}return{w:D,h:C}},c._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},c._run=function(){for(var h=50*Math.max(0.01,Math.min(0.99,this.timeSlice||0.3)),g=(new Date).getTime()+h,l=!1;g>(new Date).getTime();){if(!this._drawNext()){l=!0;break}}if(l){this._endBuild()}else{var k=this;this._timerID=setTimeout(function(){k._run()},50-h)}var j=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var i=new createjs.Event("progress");i.progress=j,this.dispatchEvent(i)}},c._drawNext=function(){var h=this._frames[this._index],g=h.scale*this._scale,l=h.rect,k=h.sourceRect,j=this._data.images[h.img],i=j.getContext("2d");return h.funct&&h.funct(h.source,h.data),i.save(),i.beginPath(),i.rect(l.x,l.y,l.width,l.height),i.clip(),i.translate(Math.ceil(l.x-k.x*g),Math.ceil(l.y-k.y*g)),i.scale(g,g),h.source.draw(i),i.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(d,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function d(f){this.DisplayObject_constructor(),"string"==typeof f&&(f=document.getElementById(f)),this.mouseEnabled=!1;var e=f.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=f,this._oldProps=null,this._oldStage=null,this._drawAction=null}var c=createjs.extend(d,createjs.DisplayObject);c.isVisible=function(){return null!=this.htmlElement},c.draw=function(){return !0},c.cache=function(){},c.uncache=function(){},c.updateCache=function(){},c.hitTest=function(){},c.localToGlobal=function(){},c.globalToLocal=function(){},c.localToLocal=function(){},c.clone=function(){throw"DOMElement cannot be cloned."},c.toString=function(){return"[DOMElement (name="+this.name+")]"},c._tick=function(f){var e=this.stage;e&&e!==this._oldStage&&(this._drawAction&&e.off("drawend",this._drawAction),this._drawAction=e.on("drawend",this._handleDrawEnd,this),this._oldStage=e),this.DisplayObject__tick(f)},c._handleDrawEnd=function(){var r=this.htmlElement;if(r){var q=r.style,p=this.getConcatenatedDisplayProps(this._props),o=p.matrix,n=p.visible?"visible":"hidden";if(n!=q.visibility&&(q.visibility=n),p.visible){var m=this._oldProps,l=m&&m.matrix,k=10000;if(!l||!l.equals(o)){var j="matrix("+(o.a*k|0)/k+","+(o.b*k|0)/k+","+(o.c*k|0)/k+","+(o.d*k|0)/k+","+(o.tx+0.5|0);q.transform=q.WebkitTransform=q.OTransform=q.msTransform=j+","+(o.ty+0.5|0)+")",q.MozTransform=j+"px,"+(o.ty+0.5|0)+"px)",m||(m=this._oldProps=new createjs.DisplayProps(!0,null)),m.matrix.copy(o)}m.alpha!=p.alpha&&(q.opacity=""+(p.alpha*k|0)/k,m.alpha=p.alpha)}}},createjs.DOMElement=createjs.promote(d,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function d(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}var c=d.prototype;c.getBounds=function(b){return b},c.shaderParamSetup=function(){},c.applyFilter=function(t,s,r,q,p,o,n,m){o=o||t,null==n&&(n=s),null==m&&(m=r);try{var l=t.getImageData(s,r,q,p)}catch(k){return !1}return this._applyFilter(l)?(o.putImageData(l,n,m),!0):!1},c.toString=function(){return"[Filter]"},c.clone=function(){return new d},c._applyFilter=function(){return !0},createjs.Filter=d}(),this.createjs=this.createjs||{},function(){function d(){this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0}var c=d.prototype;d.getFilterBounds=function(i,h){h||(h=new createjs.Rectangle);var n=i.filters,m=n&&n.length;if(0>=!!m){return h}for(var l=0;m>l;l++){var k=n[l];if(k&&k.getBounds){var j=k.getBounds();j&&(0==l?h.setValues(j.x,j.y,j.width,j.height):h.extend(j.x,j.y,j.width,j.height))}}return h},c.toString=function(){return"[BitmapCache]"},c.define=function(i,h,n,m,l,k,j){if(!i){throw"No symbol to cache"}this._options=j,this.target=i,this.width=m>=1?m:1,this.height=l>=1?l:1,this.x=h||0,this.y=n||0,this.scale=k||1,this.update()},c.update=function(a){if(!this.target){throw"define() must be called before update()"}var f=d.getFilterBounds(this.target),e=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+f.width,this._drawHeight=Math.ceil(this.height*this.scale)+f.height,e&&this._drawWidth==e.width&&this._drawHeight==e.height||this._updateSurface(),this._filterOffX=f.x,this._filterOffY=f.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(a),this.cacheID=this.cacheID?this.cacheID+1:1},c.release=function(){if(this._webGLCache){this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1}else{var b=this.target.stage;b instanceof createjs.StageGL&&b.releaseTexture(this.target.cacheCanvas)}this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},c.getCacheDataURL=function(){var b=this.target&&this.target.cacheCanvas;return b?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=b.toDataURL?b.toDataURL():null),this._cacheDataURL):null},c.draw=function(b){return this.target?(b.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0):!1},c._updateSurface=function(){if(!this._options||!this._options.useGL){var f=this.target.cacheCanvas;return f||(f=this.target.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),f.width=this._drawWidth,void (f.height=this._drawHeight)}if(!this._webGLCache){if("stage"===this._options.useGL){if(!this.target.stage||!this.target.stage.isWebGL){var e="Cannot use 'stage' for cache because the object's parent stage is ";throw e+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage."}this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else{if("new"===this._options.useGL){this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new createjs.StageGL(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0}else{if(!(this._options.useGL instanceof createjs.StageGL)){throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL}this.target.cacheCanvas=!0,this._webGLCache=this._options.useGL,this._webGLCache.isCacheControlled=!0}}}var f=this.target.cacheCanvas,g=this._webGLCache;g.isCacheControlled&&(f.width=this._drawWidth,f.height=this._drawHeight,g.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(g.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),g.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):g.isCacheControlled||g.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},c._drawToCache=function(g){var f=this.target.cacheCanvas,j=this.target,i=this._webGLCache;if(i){i.cacheDraw(j,j.filters,this),f=this.target.cacheCanvas,f.width=this._drawWidth,f.height=this._drawHeight}else{var h=f.getContext("2d");g||h.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),h.save(),h.globalCompositeOperation=g,h.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),h.translate(-this.x,-this.y),j.draw(h,!0),h.restore(),j.filters&&j.filters.length&&this._applyFilters(h)}f._invalid=!0},c._applyFilters=function(i){var h,n=this.target.filters,m=this._drawWidth,l=this._drawHeight,k=0,j=n[k];do{j.usesContext?(h&&(i.putImageData(h,0,0),h=null),j.applyFilter(i,0,0,m,l)):(h||(h=i.getImageData(0,0,m,l)),j._applyFilter(h)),j=null!==j._multiPass?j._multiPass:n[++k]}while(j);h&&i.putImageData(h,0,0)},createjs.BitmapCache=d}(),this.createjs=this.createjs||{},function(){function e(h,g,i){this.Filter_constructor(),this._blurX=h,this._blurXTable=[],this._lastBlurX=null,this._blurY=g,this._blurYTable=[],this._lastBlurY=null,this._quality,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}",(isNaN(i)||1>i)&&(i=1),this.setQuality(0|i)}var d=createjs.extend(e,createjs.Filter);d.getBlurX=function(){return this._blurX},d.getBlurY=function(){return this._blurY},d.setBlurX=function(b){(isNaN(b)||0>b)&&(b=0),this._blurX=b},d.setBlurY=function(b){(isNaN(b)||0>b)&&(b=0),this._blurY=b},d.getQuality=function(){return this._quality},d.setQuality=function(b){(isNaN(b)||0>b)&&(b=0),this._quality=0|b},d._getShader=function(){var h=this._lastBlurX!==this._blurX,g=this._lastBlurY!==this._blurY,i=this._lastQuality!==this._quality;return h||g||i?((h||i)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(g||i)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void (this._lastQuality=this._quality)):this._compiledShader},d._setShader=function(){this._compiledShader};try{Object.defineProperties(d,{blurX:{get:d.getBlurX,set:d.setBlurX},blurY:{get:d.getBlurY,set:d.setBlurY},quality:{get:d.getQuality,set:d.setQuality},_builtShader:{get:d._getShader,set:d._setShader}})}catch(f){console.log(f)}d._getTable=function(j){var i=4.2;if(1>=j){return[1]}var p=[],o=Math.ceil(2*j);o+=o%2?0:1;for(var n=o/2|0,m=-n;n>=m;m++){var l=m/n*i;p.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-(Math.pow(l,2)/4)))}var k=p.reduce(function(g,c){return g+c});return p.map(function(b){return b/k})},d._updateShader=function(){if(void 0!==this._blurX&&void 0!==this._blurY){var b=this.FRAG_SHADER_TEMPLATE;b=b.replace(/\{\{blurX\}\}/g,this._blurXTable.length.toFixed(0)),b=b.replace(/\{\{blurY\}\}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=b}},d.shaderParamSetup=function(h,g,i){h.uniform1fv(h.getUniformLocation(i,"xWeight"),this._blurXTable),h.uniform1fv(h.getUniformLocation(i,"yWeight"),this._blurYTable),h.uniform2f(h.getUniformLocation(i,"textureOffset"),2/(g._viewportWidth*this._quality),2/(g._viewportHeight*this._quality))},e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],d.getBounds=function(h){var g=0|this.blurX,j=0|this.blurY;if(0>=g&&0>=j){return h}var i=Math.pow(this.quality,0.2);return(h||new createjs.Rectangle).pad(j*i+1,g*i+1,j*i+1,g*i+1)},d.clone=function(){return new e(this.blurX,this.blurY,this.quality)},d.toString=function(){return"[BlurFilter]"},d._applyFilter=function(aA){var az=this._blurX>>1;if(isNaN(az)||0>az){return !1}var ay=this._blurY>>1;if(isNaN(ay)||0>ay){return !1}if(0==az&&0==ay){return !1}var ax=this.quality;(isNaN(ax)||1>ax)&&(ax=1),ax|=0,ax>3&&(ax=3),1>ax&&(ax=1);var aw=aA.data,av=0,au=0,at=0,ar=0,aq=0,ap=0,ao=0,an=0,am=0,al=0,ak=0,aj=0,ai=0,ah=0,ag=0,af=az+az+1|0,ae=ay+ay+1|0,ad=0|aA.width,ac=0|aA.height,ab=ad-1|0,aa=ac-1|0,Z=az+1|0,Y=ay+1|0,X={r:0,b:0,g:0,a:0},W=X;for(at=1;af>at;at++){W=W.n={r:0,b:0,g:0,a:0}}W.n=X;var V={r:0,b:0,g:0,a:0},U=V;for(at=1;ae>at;at++){U=U.n={r:0,b:0,g:0,a:0}}U.n=V;for(var T=null,S=0|e.MUL_TABLE[az],R=0|e.SHG_TABLE[az],Q=0|e.MUL_TABLE[ay],P=0|e.SHG_TABLE[ay];ax-->0;){ao=ap=0;var O=S,a=R;for(au=ac;--au>-1;){for(an=Z*(aj=aw[0|ap]),am=Z*(ai=aw[ap+1|0]),al=Z*(ah=aw[ap+2|0]),ak=Z*(ag=aw[ap+3|0]),W=X,at=Z;--at>-1;){W.r=aj,W.g=ai,W.b=ah,W.a=ag,W=W.n}for(at=1;Z>at;at++){ar=ap+((at>ab?ab:at)<<2)|0,an+=W.r=aw[ar],am+=W.g=aw[ar+1],al+=W.b=aw[ar+2],ak+=W.a=aw[ar+3],W=W.n}for(T=X,av=0;ad>av;av++){aw[ap++]=an*O>>>a,aw[ap++]=am*O>>>a,aw[ap++]=al*O>>>a,aw[ap++]=ak*O>>>a,ar=ao+((ar=av+az+1)<ab?ar:ab)<<2,an-=T.r-(T.r=aw[ar]),am-=T.g-(T.g=aw[ar+1]),al-=T.b-(T.b=aw[ar+2]),ak-=T.a-(T.a=aw[ar+3]),T=T.n}ao+=ad}for(O=Q,a=P,av=0;ad>av;av++){for(ap=av<<2|0,an=Y*(aj=aw[ap])|0,am=Y*(ai=aw[ap+1|0])|0,al=Y*(ah=aw[ap+2|0])|0,ak=Y*(ag=aw[ap+3|0])|0,U=V,at=0;Y>at;at++){U.r=aj,U.g=ai,U.b=ah,U.a=ag,U=U.n}for(aq=ad,at=1;ay>=at;at++){ap=aq+av<<2,an+=U.r=aw[ap],am+=U.g=aw[ap+1],al+=U.b=aw[ap+2],ak+=U.a=aw[ap+3],U=U.n,aa>at&&(aq+=ad)}if(ap=av,T=V,ax>0){for(au=0;ac>au;au++){ar=ap<<2,aw[ar+3]=ag=ak*O>>>a,ag>0?(aw[ar]=an*O>>>a,aw[ar+1]=am*O>>>a,aw[ar+2]=al*O>>>a):aw[ar]=aw[ar+1]=aw[ar+2]=0,ar=av+((ar=au+Y)<aa?ar:aa)*ad<<2,an-=T.r-(T.r=aw[ar]),am-=T.g-(T.g=aw[ar+1]),al-=T.b-(T.b=aw[ar+2]),ak-=T.a-(T.a=aw[ar+3]),T=T.n,ap+=ad}}else{for(au=0;ac>au;au++){ar=ap<<2,aw[ar+3]=ag=ak*O>>>a,ag>0?(ag=255/ag,aw[ar]=(an*O>>>a)*ag,aw[ar+1]=(am*O>>>a)*ag,aw[ar+2]=(al*O>>>a)*ag):aw[ar]=aw[ar+1]=aw[ar+2]=0,ar=av+((ar=au+Y)<aa?ar:aa)*ad<<2,an-=T.r-(T.r=aw[ar]),am-=T.g-(T.g=aw[ar+1]),al-=T.b-(T.b=aw[ar+2]),ak-=T.a-(T.a=aw[ar+3]),T=T.n,ap+=ad}}}}return !0},createjs.BlurFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){function d(b){this.Filter_constructor(),this.alphaMap=b,this._alphaMap=null,this._mapData=null,this._mapTexture=null,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}"}var c=createjs.extend(d,createjs.Filter);c.shaderParamSetup=function(f,e,g){this._mapTexture||(this._mapTexture=f.createTexture()),f.activeTexture(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._mapTexture),e.setTextureParams(f),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,this.alphaMap),f.uniform1i(f.getUniformLocation(g,"uAlphaSampler"),1)},c.clone=function(){var a=new d(this.alphaMap);return a._alphaMap=this._alphaMap,a._mapData=this._mapData,a},c.toString=function(){return"[AlphaMapFilter]"},c._applyFilter=function(g){if(!this.alphaMap){return !0}if(!this._prepAlphaMap()){return !1}for(var f=g.data,j=this._mapData,i=0,h=f.length;h>i;i+=4){f[i+3]=j[i]||0}return !0},c._prepAlphaMap=function(){if(!this.alphaMap){return !1}if(this.alphaMap==this._alphaMap&&this._mapData){return !0}this._mapData=null;var g,f=this._alphaMap=this.alphaMap,j=f;f instanceof HTMLCanvasElement?g=j.getContext("2d"):(j=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),j.width=f.width,j.height=f.height,g=j.getContext("2d"),g.drawImage(f,0,0));try{var i=g.getImageData(0,0,f.width,f.height)}catch(h){return !1}return this._mapData=i.data,!0},createjs.AlphaMapFilter=createjs.promote(d,"Filter")}(),this.createjs=this.createjs||{},function(){function d(b){this.Filter_constructor(),this.mask=b,this.usesContext=!0,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}"}var c=createjs.extend(d,createjs.Filter);c.shaderParamSetup=function(f,e,g){this._mapTexture||(this._mapTexture=f.createTexture()),f.activeTexture(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._mapTexture),e.setTextureParams(f),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,this.mask),f.uniform1i(f.getUniformLocation(g,"uAlphaSampler"),1)},c.applyFilter=function(j,i,p,o,n,m,l,k){return this.mask?(m=m||j,null==l&&(l=i),null==k&&(k=p),m.save(),j!=m?!1:(m.globalCompositeOperation="destination-in",m.drawImage(this.mask,l,k),m.restore(),!0)):!0},c.clone=function(){return new d(this.mask)},c.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(d,"Filter")}(),this.createjs=this.createjs||{},function(){function d(j,i,p,o,n,m,l,k){this.Filter_constructor(),this.redMultiplier=null!=j?j:1,this.greenMultiplier=null!=i?i:1,this.blueMultiplier=null!=p?p:1,this.alphaMultiplier=null!=o?o:1,this.redOffset=n||0,this.greenOffset=m||0,this.blueOffset=l||0,this.alphaOffset=k||0,this.FRAG_SHADER_BODY="uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}"}var c=createjs.extend(d,createjs.Filter);c.shaderParamSetup=function(f,e,g){f.uniform4f(f.getUniformLocation(g,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),f.uniform4f(f.getUniformLocation(g,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},c.toString=function(){return"[ColorFilter]"},c.clone=function(){return new d(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},c._applyFilter=function(f){for(var e=f.data,h=e.length,g=0;h>g;g+=4){e[g]=e[g]*this.redMultiplier+this.redOffset,e[g+1]=e[g+1]*this.greenMultiplier+this.greenOffset,e[g+2]=e[g+2]*this.blueMultiplier+this.blueOffset,e[g+3]=e[g+3]*this.alphaMultiplier+this.alphaOffset}return !0},createjs.ColorFilter=createjs.promote(d,"Filter")}(),this.createjs=this.createjs||{},function(){function d(f,e,h,g){this.setColor(f,e,h,g)}var c=d.prototype;d.DELTA_INDEX=[0,0.01,0.02,0.04,0.05,0.06,0.07,0.08,0.1,0.11,0.12,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.25,0.27,0.28,0.3,0.32,0.34,0.36,0.38,0.4,0.42,0.44,0.46,0.48,0.5,0.53,0.56,0.59,0.62,0.65,0.68,0.71,0.74,0.77,0.8,0.83,0.86,0.89,0.92,0.95,0.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],d.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],d.LENGTH=d.IDENTITY_MATRIX.length,c.setColor=function(f,e,h,g){return this.reset().adjustColor(f,e,h,g)},c.reset=function(){return this.copy(d.IDENTITY_MATRIX)},c.adjustColor=function(f,e,h,g){return this.adjustHue(g),this.adjustContrast(e),this.adjustBrightness(f),this.adjustSaturation(h)},c.adjustBrightness=function(b){return 0==b||isNaN(b)?this:(b=this._cleanValue(b,255),this._multiplyMatrix([1,0,0,0,b,0,1,0,0,b,0,0,1,0,b,0,0,0,1,0,0,0,0,0,1]),this)},c.adjustContrast=function(a){if(0==a||isNaN(a)){return this}a=this._cleanValue(a,100);var e;return 0>a?e=127+a/100*127:(e=a%1,e=0==e?d.DELTA_INDEX[a]:d.DELTA_INDEX[a<<0]*(1-e)+d.DELTA_INDEX[(a<<0)+1]*e,e=127*e+127),this._multiplyMatrix([e/127,0,0,0,0.5*(127-e),0,e/127,0,0,0.5*(127-e),0,0,e/127,0,0.5*(127-e),0,0,0,1,0,0,0,0,0,1]),this},c.adjustSaturation=function(g){if(0==g||isNaN(g)){return this}g=this._cleanValue(g,100);var f=1+(g>0?3*g/100:g/100),j=0.3086,i=0.6094,h=0.082;return this._multiplyMatrix([j*(1-f)+f,i*(1-f),h*(1-f),0,0,j*(1-f),i*(1-f)+f,h*(1-f),0,0,j*(1-f),i*(1-f),h*(1-f)+f,0,0,0,0,0,1,0,0,0,0,0,1]),this},c.adjustHue=function(h){if(0==h||isNaN(h)){return this}h=this._cleanValue(h,180)/180*Math.PI;var g=Math.cos(h),l=Math.sin(h),k=0.213,j=0.715,i=0.072;return this._multiplyMatrix([k+g*(1-k)+l*-k,j+g*-j+l*-j,i+g*-i+l*(1-i),0,0,k+g*-k+0.143*l,j+g*(1-j)+0.14*l,i+g*-i+l*-0.283,0,0,k+g*-k+l*-(1-k),j+g*-j+l*j,i+g*(1-i)+l*i,0,0,0,0,0,1,0,0,0,0,0,1]),this},c.concat=function(a){return a=this._fixMatrix(a),a.length!=d.LENGTH?this:(this._multiplyMatrix(a),this)},c.clone=function(){return(new d).copy(this)},c.toArray=function(){for(var a=[],f=0,e=d.LENGTH;e>f;f++){a[f]=this[f]}return a},c.copy=function(a){for(var f=d.LENGTH,e=0;f>e;e++){this[e]=a[e]}return this},c.toString=function(){return"[ColorMatrix]"},c._multiplyMatrix=function(h){var g,l,k,j=[];for(g=0;5>g;g++){for(l=0;5>l;l++){j[l]=this[l+5*g]}for(l=0;5>l;l++){var i=0;for(k=0;5>k;k++){i+=h[l+5*k]*j[k]}this[l+5*g]=i}}},c._cleanValue=function(f,e){return Math.min(e,Math.max(-e,f))},c._fixMatrix=function(a){return a instanceof d&&(a=a.toArray()),a.length<d.LENGTH?a=a.slice(0,a.length).concat(d.IDENTITY_MATRIX.slice(a.length,d.LENGTH)):a.length>d.LENGTH&&(a=a.slice(0,d.LENGTH)),a},createjs.ColorMatrix=d}(),this.createjs=this.createjs||{},function(){function d(b){this.Filter_constructor(),this.matrix=b,this.FRAG_SHADER_BODY="uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}"}var c=createjs.extend(d,createjs.Filter);c.shaderParamSetup=function(g,f,j){var i=this.matrix,h=new Float32Array([i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]]);g.uniformMatrix4fv(g.getUniformLocation(j,"uColorMatrix"),!1,h),g.uniform4f(g.getUniformLocation(j,"uColorMatrixOffset"),i[4]/255,i[9]/255,i[14]/255,i[19]/255)},c.toString=function(){return"[ColorMatrixFilter]"},c.clone=function(){return new d(this.matrix)},c._applyFilter=function(af){for(var ae,ad,ac,ab,aa=af.data,Z=aa.length,Y=this.matrix,X=Y[0],W=Y[1],V=Y[2],U=Y[3],T=Y[4],S=Y[5],R=Y[6],Q=Y[7],O=Y[8],M=Y[9],K=Y[10],J=Y[11],I=Y[12],H=Y[13],G=Y[14],F=Y[15],E=Y[16],D=Y[17],P=Y[18],N=Y[19],L=0;Z>L;L+=4){ae=aa[L],ad=aa[L+1],ac=aa[L+2],ab=aa[L+3],aa[L]=ae*X+ad*W+ac*V+ab*U+T,aa[L+1]=ae*S+ad*R+ac*Q+ab*O+M,aa[L+2]=ae*K+ad*J+ac*I+ab*H+G,aa[L+3]=ae*F+ad*E+ac*D+ab*P+N}return !0},createjs.ColorMatrixFilter=createjs.promote(d,"Filter")}(),this.createjs=this.createjs||{},function(){function b(){throw"Touch cannot be instantiated"}b.isSupported=function(){return !!("ontouchstart" in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},b.enable=function(a,f,e){return a&&a.canvas&&b.isSupported()?a.__touch?!0:(a.__touch={pointers:{},multitouch:!f,preventDefault:!e,count:0},"ontouchstart" in window?b._IOS_enable(a):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&b._IE_enable(a),!0):!1},b.disable=function(a){a&&("ontouchstart" in window?b._IOS_disable(a):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&b._IE_disable(a),delete a.__touch)},b._IOS_enable=function(a){var f=a.canvas,e=a.__touch.f=function(d){b._IOS_handleEvent(a,d)};f.addEventListener("touchstart",e,!1),f.addEventListener("touchmove",e,!1),f.addEventListener("touchend",e,!1),f.addEventListener("touchcancel",e,!1)},b._IOS_disable=function(e){var d=e.canvas;if(d){var f=e.__touch.f;d.removeEventListener("touchstart",f,!1),d.removeEventListener("touchmove",f,!1),d.removeEventListener("touchend",f,!1),d.removeEventListener("touchcancel",f,!1)}},b._IOS_handleEvent=function(j,i){if(j){j.__touch.preventDefault&&i.preventDefault&&i.preventDefault();for(var p=i.changedTouches,o=i.type,n=0,m=p.length;m>n;n++){var l=p[n],k=l.identifier;l.target==j.canvas&&("touchstart"==o?this._handleStart(j,k,i,l.pageX,l.pageY):"touchmove"==o?this._handleMove(j,k,i,l.pageX,l.pageY):("touchend"==o||"touchcancel"==o)&&this._handleEnd(j,k,i))}}},b._IE_enable=function(a){var f=a.canvas,e=a.__touch.f=function(d){b._IE_handleEvent(a,d)};void 0===window.navigator.pointerEnabled?(f.addEventListener("MSPointerDown",e,!1),window.addEventListener("MSPointerMove",e,!1),window.addEventListener("MSPointerUp",e,!1),window.addEventListener("MSPointerCancel",e,!1),a.__touch.preventDefault&&(f.style.msTouchAction="none")):(f.addEventListener("pointerdown",e,!1),window.addEventListener("pointermove",e,!1),window.addEventListener("pointerup",e,!1),window.addEventListener("pointercancel",e,!1),a.__touch.preventDefault&&(f.style.touchAction="none")),a.__touch.activeIDs={}},b._IE_disable=function(d){var c=d.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",c,!1),window.removeEventListener("MSPointerUp",c,!1),window.removeEventListener("MSPointerCancel",c,!1),d.canvas&&d.canvas.removeEventListener("MSPointerDown",c,!1)):(window.removeEventListener("pointermove",c,!1),window.removeEventListener("pointerup",c,!1),window.removeEventListener("pointercancel",c,!1),d.canvas&&d.canvas.removeEventListener("pointerdown",c,!1))},b._IE_handleEvent=function(g,f){if(g){g.__touch.preventDefault&&f.preventDefault&&f.preventDefault();var j=f.type,i=f.pointerId,h=g.__touch.activeIDs;if("MSPointerDown"==j||"pointerdown"==j){if(f.srcElement!=g.canvas){return}h[i]=!0,this._handleStart(g,i,f,f.pageX,f.pageY)}else{h[i]&&("MSPointerMove"==j||"pointermove"==j?this._handleMove(g,i,f,f.pageX,f.pageY):("MSPointerUp"==j||"MSPointerCancel"==j||"pointerup"==j||"pointercancel"==j)&&(delete h[i],this._handleEnd(g,i,f)))}}},b._handleStart=function(i,h,n,m,l){var k=i.__touch;if(k.multitouch||!k.count){var j=k.pointers;j[h]||(j[h]=!0,k.count++,i._handlePointerDown(h,n,m,l))}},b._handleMove=function(g,f,j,i,h){g.__touch.pointers[f]&&g._handlePointerMove(f,j,i,h)},b._handleEnd=function(g,f,j){var i=g.__touch,h=i.pointers;h[f]&&(i.count--,g._handlePointerUp(f,j,!0),delete h[f])},createjs.Touch=b}(),this.createjs=this.createjs||{},function(){var b=createjs.EaselJS=createjs.EaselJS||{};b.version="1.0.0",b.buildDate="Thu, 14 Sep 2017 19:47:53 GMT"}();